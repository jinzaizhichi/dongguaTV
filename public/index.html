<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Ê†∏ÂøÉÔºö‰∏çÂèëÈÄÅ Referrer -->
    <meta name="referrer" content="no-referrer">
    <title>EËßÜÁïå</title>

    <!-- PWA Setup -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon.png" type="image/png">
    <meta name="theme-color" content="#141414">

    <!-- Êú¨Âú∞ÈùôÊÄÅËµÑÊ∫ê (ÈÅøÂÖç CDN ËÆøÈóÆÈóÆÈ¢ò) -->
    <link href="libs/css/bootstrap.min.css" rel="stylesheet">
    <link href="libs/css/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="libs/css/fontawesome.min.css">

    <script data-cfasync="false" src="libs/js/hls.min.js"></script>
    <script data-cfasync="false" src="libs/js/DPlayer.min.js"></script>
    <script data-cfasync="false" src="libs/js/vue.global.prod.min.js"></script>
    <script data-cfasync="false" src="libs/js/bootstrap.bundle.min.js"></script>

    <style>
        :root {
            --bg-color: #141414;
            --panel-bg: #1f1f1f;
            --accent: #e50914;
            --text-main: #ffffff;
            --text-sub: #b3b3b3;
            --border: rgba(255, 255, 255, 0.1);
        }

        [v-cloak] {
            display: none !important;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            min-height: 100vh;
            padding-bottom: 60px;
            overflow-x: hidden;
        }

        /* Â±èËîΩ DPlayer ÊèêÁ§∫ */
        .dplayer-notice,
        .dplayer-notice-list {
            display: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
        }

        /* ÂÖ®Â±ÄÊªöÂä®Êù° */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #141414;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* ÂØºËà™ */
        .navbar-custom {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            padding: 15px 4%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.9) 0%, transparent 100%);
            transition: 0.3s;
        }

        .navbar-custom.scrolled {
            background: #141414;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
        }

        .brand {
            font-size: 26px;
            font-weight: 800;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
        }

        /* Hero */
        .carousel-item {
            height: 70vh;
            background-color: #000;
        }

        .hero-bg {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center top;
            transition: transform 10s ease;
            mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
        }

        .carousel-item.active .hero-bg {
            transform: scale(1.05);
        }

        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, #141414 0%, transparent 60%), linear-gradient(to right, rgba(0, 0, 0, 0.8) 0%, transparent 50%);
            display: flex;
            align-items: center;
            padding-left: 5%;
        }

        .hero-content {
            max-width: 600px;
            margin-top: 60px;
            animation: fadeInUp 0.8s;
        }

        .hero-tag {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 15px;
            backdrop-filter: blur(5px);
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 15px;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.8);
        }

        .hero-desc {
            font-size: 1.1rem;
            color: #ddd;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            margin-bottom: 25px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .btn-play {
            background: #fff;
            color: #000;
            border: none;
            padding: 10px 30px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-play:hover {
            transform: scale(1.05);
        }

        .btn-info {
            background: rgba(109, 109, 110, 0.7);
            color: #fff;
            border: none;
            padding: 10px 30px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: 0.2s;
            backdrop-filter: blur(5px);
        }

        .btn-info:hover {
            background: rgba(109, 109, 110, 0.5);
        }

        @media(max-width: 768px) {
            .carousel-item {
                height: 55vh;
            }

            .hero-title {
                font-size: 2.2rem;
            }

            .btn-play,
            .btn-info {
                padding: 8px 20px;
                font-size: 1rem;
            }
        }

        /* ÊêúÁ¥¢Ê°Ü */
        .search-section {
            position: sticky;
            top: 10px;
            /* Âê∏È°∂Êó∂‰Ωç‰∫é Navbar ÂÜÖÈÉ® */
            margin-top: -35px;
            z-index: 1001;
            /* È´ò‰∫é Navbar */
            padding: 0 4%;
            /* ÂØπÈΩê Navbar Padding */
            margin-bottom: 30px;
            pointer-events: none;
        }

        .search-box-wrapper {
            pointer-events: auto;
            background: rgba(20, 20, 20, 0.95);
            /* Âä†Ê∑±ËÉåÊôØÔºåÈò≤Ê≠¢ÈÄèËßÜÂπ≤Êâ∞ */
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 50px;
            /* Êõ¥ÂúÜÊ∂¶ */
            display: flex;
            align-items: center;
            transition: 0.3s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 100%;
            /* ÊíëÊª° */
            max-width: none;
            margin: 0 auto;
        }

        .search-box-wrapper.compact {
            max-width: 280px;
            height: 40px;
            margin-right: 0;
            /* Âè≥ÂØπÈΩê */
            margin-left: auto;
            background: rgba(40, 40, 40, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .search-box-wrapper.compact .search-input {
            height: 40px;
            font-size: 14px;
        }

        .search-box-wrapper.compact .search-icon {
            font-size: 14px;
            padding: 0 12px;
        }

        .btn-top {
            position: fixed;
            bottom: 40px;
            right: 40px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #e50914, #b20710);
            color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            z-index: 1000;
            border: none;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }

        .btn-top.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .btn-top:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 15px 30px rgba(229, 9, 20, 0.5);
        }



        .search-box-wrapper:focus-within {
            border-color: var(--accent);
            background: #000;
        }

        .search-icon {
            padding: 0 20px;
            color: #888;
            font-size: 18px;
            cursor: pointer;
        }

        .search-input {
            width: 100%;
            height: 60px;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 18px;
            outline: none;
        }

        /* ÂàÜÁ±ªÂØºËà™Ê†è */
        .category-nav-container {
            display: flex;
            overflow-x: auto;
            padding: 20px 4%;
            gap: 20px;
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* IE/Edge */
        }

        .category-nav-container::-webkit-scrollbar {
            display: none;
            /* Chrome/Safari */
        }

        .category-item {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            width: 70px;
            transition: transform 0.2s;
        }

        .category-item:hover {
            transform: translateY(-5px);
        }

        .category-item span {
            font-size: 12px;
            color: #aaa;
            font-weight: 500;
        }

        .category-item:hover span {
            color: #fff;
        }

        .cat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        /* ÂàóË°®ÈÄöÁî® */
        .section-container {
            padding: 0 5%;
            margin-bottom: 40px;
            min-height: 100px;
            /* Á°Æ‰øù Intersection Observer ËÉΩÊ£ÄÊµãÂà∞ËøõÂÖ•ËßÜÂè£ */
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .section-line {
            width: 4px;
            height: 22px;
            background: var(--accent);
            border-radius: 2px;
            margin-right: 12px;
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #fff;
            margin: 0;
            line-height: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            font-size: 1.1rem;
            opacity: 0.7;
        }

        /* ÊªöÂä®ÂÆπÂô® */
        .scroll-container {
            position: relative;
        }

        .hot-row {
            display: flex;
            gap: 14px;
            overflow-x: auto;
            padding-bottom: 20px;
            scroll-behavior: smooth;
        }

        .hot-row::-webkit-scrollbar {
            height: 0px;
        }

        /* ÊªöÂä®ÊåâÈíÆ */
        .scroll-btn {
            position: absolute;
            top: 35%;
            transform: translateY(-50%);
            width: 36px;
            height: 80px;
            background: linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(50, 50, 50, 0.9) 100%);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 18px;
            cursor: pointer;
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.25s ease;
            opacity: 0.6;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        }

        .scroll-btn:hover {
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.9) 0%, rgba(180, 0, 15, 0.85) 100%);
            opacity: 1;
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 6px 20px rgba(229, 9, 20, 0.4);
        }

        .scroll-btn.left {
            left: -5px;
            border-radius: 0 8px 8px 0;
        }

        .scroll-btn.right {
            right: -5px;
            border-radius: 8px 0 0 8px;
        }

        @media (max-width: 768px) {
            .scroll-btn {
                display: none;
                /* ÁßªÂä®Á´ØÈöêËóèÔºå‰ΩøÁî®ÊâãÊåáÊªëÂä® */
            }
        }

        .hot-card {
            min-width: 150px;
            width: 150px;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
        }

        .hot-card:hover {
            transform: scale(1.08);
            z-index: 10;
        }

        .poster-wrap {
            width: 100%;
            aspect-ratio: 2/3;
            border-radius: 6px;
            overflow: hidden;
            background: #222;
            position: relative;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
        }

        .poster-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.5s;
        }

        .rank-badge {
            position: absolute;
            top: -12px;
            left: -8px;
            font-size: 64px;
            font-weight: 900;
            color: #141414;
            -webkit-text-stroke: 2px #666;
            font-family: impact, sans-serif;
            text-shadow: 2px 2px 0px #eee;
            z-index: 10;
            pointer-events: none;
            line-height: 1;
        }

        .rating-badge {
            position: absolute;
            top: 6px;
            right: 6px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            color: #46d369;
            font-weight: bold;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid rgba(70, 211, 105, 0.3);
        }

        .poster-fallback {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #333 0%, #111 100%);
            padding: 5px;
            text-align: center;
        }

        .fallback-text {
            font-size: 12px;
            color: #999;
        }

        .movie-name {
            margin-top: 10px;
            font-size: 14px;
            color: #eee;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            text-align: center;
            font-weight: 500;
        }

        .movie-date {
            font-size: 12px;
            color: #666;
            text-align: center;
            margin-top: 2px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
            min-height: 300px;
        }

        .result-card {
            cursor: pointer;
            transition: 0.2s;
        }

        .result-card:hover {
            transform: translateY(-5px);
        }

        /* ‚òÖ‚òÖ‚òÖ Êí≠ÊîæÈ°µÈáçÊûÑÔºöÂΩ±Èô¢Ê®°Âºè ‚òÖ‚òÖ‚òÖ */
        .detail-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #141414;
            z-index: 9999;
            display: none;
            overflow-y: auto;
        }

        .detail-overlay.active {
            display: block;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }

            to {
                transform: translateY(0);
            }
        }

        .close-btn {
            position: fixed;
            top: 25px;
            right: 30px;
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            cursor: pointer;
            z-index: 10005;
            backdrop-filter: blur(10px);
            transition: 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: rotate(90deg);
        }

        /* Â∏ÉÂ±ÄÂÆπÂô® */
        .player-layout {
            max-width: 1200px;
            margin: 0 auto;
            padding: 90px 4% 50px;
        }

        /* ËßÜÈ¢ëÂå∫Âüü */
        .player-box {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
            border: 1px solid #333;
        }

        /* ËßÜÈ¢ë‰ø°ÊÅØÊ†è */
        .video-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .video-title {
            font-size: 2.2rem;
            font-weight: 800;
            color: #fff;
            margin-bottom: 5px;
            line-height: 1.2;
        }

        .video-meta {
            color: #888;
            font-size: 14px;
        }

        /* ÊäïÂ±èÊåâÈíÆ */
        .btn-cast {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            color: #fff;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: 0.2s;
            font-size: 14px;
        }

        .btn-cast:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* ÊéßÂà∂Âå∫Âüü (‰∏ãÂçäÈÉ®ÂàÜ) */
        .controls-area {
            background: #1f1f1f;
            border-radius: 12px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Á∫øË∑ØÈÄâÊã© (Ê®™ÂêëÊªöÂä®) */
        .panel-title {
            font-size: 14px;
            color: #888;
            font-weight: 700;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .source-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }

        .source-pill {
            padding: 8px 16px;
            border-radius: 6px;
            background: #2a2a2a;
            border: 1px solid #333;
            color: #ccc;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 500;
        }

        .source-pill:hover {
            background: #333;
            border-color: #666;
            color: #fff;
        }

        .source-pill.active {
            background: var(--accent);
            border-color: var(--accent);
            color: #fff;
            box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3);
        }

        /* ÈÄâÈõÜ (Â§ßÁΩëÊ†º) */
        .ep-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            /* Ëá™ÈÄÇÂ∫îÂÆΩÂ∫¶ÔºåÊúÄÂ∞è100px */
            gap: 12px;
        }

        .ep-btn {
            background: #2a2a2a;
            border: 1px solid transparent;
            color: #ddd;
            padding: 12px 5px;
            text-align: center;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: 0.2s;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .ep-btn:hover {
            background: #333;
            color: #fff;
            border-color: #555;
        }

        .ep-btn.active {
            background: #fff;
            color: #000;
            font-weight: bold;
            border-color: #fff;
        }

        /* Áä∂ÊÄÅÁÅØ */
        .latency-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .dot-green {
            background: #46d369;
            box-shadow: 0 0 5px #46d369;
        }

        .dot-yellow {
            background: #ffcc00;
        }

        .dot-red {
            background: #ff453a;
        }

        /* Â±ïÂºÄ/Êî∂Ëµ∑ÊåâÈíÆ */
        .expand-toggle {
            font-size: 13px;
            color: #888;
            cursor: pointer;
            margin-left: 15px;
            transition: color 0.2s;
            white-space: nowrap;
        }

        .expand-toggle:hover {
            color: #fff;
        }

        .expand-toggle i {
            margin-left: 4px;
            font-size: 11px;
            transition: transform 0.3s;
        }

        .expand-toggle.expanded i {
            transform: rotate(180deg);
        }

        /* ÁΩëÊ†ºÂ±ïÂºÄÂ∏ÉÂ±Ä - ‰ΩøÁî® flexbox ‰øùÊåÅÂõ∫ÂÆöÂç°ÁâáÂÆΩÂ∫¶ */
        .grid-expanded {
            display: flex;
            flex-wrap: wrap;
            gap: 14px;
            /* ‰∏éÂçïË°åÊªöÂä®ÂÆπÂô®ÁöÑ gap ‰∏ÄËá¥ */
        }

        .grid-expanded .hot-card {
            /* ‰øùÊåÅ‰∏éÂçïË°åÊªöÂä®Êó∂Áõ∏ÂêåÁöÑÂõ∫ÂÆöÂÆΩÂ∫¶ */
            min-width: 150px;
            width: 150px;
            flex-shrink: 0;
        }

        /* ÂàÜÈ°µÊéßÂà∂ */
        .pagination-controls {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 25px 0;
        }

        .page-btn {
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #fff;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.25s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .page-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none;
        }

        .page-info {
            color: #888;
            font-size: 13px;
            min-width: 100px;
            text-align: center;
        }

        .page-info .page-num {
            color: #fff;
            font-weight: 600;
            font-size: 15px;
        }

        .footer {
            text-align: center;
            font-size: 12px;
            color: #444;
            margin-top: 80px;
            padding-bottom: 20px;
        }

        /* ÁîµÂΩ±ËØ¶ÊÉÖÂºπÁ™ó */
        .info-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .info-modal {
            position: relative;
            max-width: 800px;
            width: 100%;
            background: #181818;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .info-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.6);
            border: none;
            color: #fff;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            font-size: 16px;
        }

        .info-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .info-modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 250px;
            background-size: cover;
            background-position: center;
            opacity: 0.4;
        }

        .info-modal-backdrop::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, transparent, #181818);
        }

        .info-modal-content {
            position: relative;
            display: flex;
            gap: 25px;
            padding: 30px;
            padding-top: 180px;
        }

        .info-modal-poster {
            flex-shrink: 0;
            width: 180px;
        }

        .info-modal-poster img {
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
        }

        .info-modal-details {
            flex: 1;
        }

        .info-modal-details h2 {
            font-size: 1.8rem;
            margin-bottom: 12px;
            color: #fff;
        }

        .info-modal-meta {
            display: flex;
            gap: 15px;
            font-size: 14px;
            color: #aaa;
            margin-bottom: 15px;
        }

        .info-rating {
            color: #ffc107;
            font-weight: bold;
        }

        .info-overview {
            color: #bbb;
            font-size: 14px;
            line-height: 1.7;
            max-height: 120px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .info-modal-btns {
            display: flex;
            gap: 12px;
        }

        @media (max-width: 600px) {
            .info-modal-content {
                flex-direction: column;
                padding-top: 200px;
                text-align: center;
            }

            .info-modal-poster {
                width: 120px;
                margin: 0 auto;
            }

            .info-modal-meta {
                justify-content: center;
            }

            .info-modal-btns {
                justify-content: center;
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Loading Screen */
        .app-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            /* Deep dark background */
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.6s ease-out, visibility 0.6s;
        }

        .app-loader.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .loader-logo {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(45deg, #e50914, #ff5151);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
            letter-spacing: 2px;
            animation: pulse 2s infinite;
        }

        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: #e50914;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }
        }

        /* Password Protection Screen */
        .password-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .password-screen.hidden {
            opacity: 0;
            transform: scale(1.1);
            pointer-events: none;
        }

        .password-container {
            background: rgba(30, 30, 40, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 50px 40px;
            width: 100%;
            max-width: 420px;
            margin: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5), 0 0 100px rgba(229, 9, 20, 0.1);
            animation: floatIn 0.8s ease-out;
        }

        @keyframes floatIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .password-logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .password-logo-text {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(45deg, #e50914, #ff5151);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 2px;
        }

        .password-logo-subtitle {
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            margin-top: 10px;
        }

        .password-input-group {
            position: relative;
            margin-bottom: 25px;
        }

        .password-input {
            width: 100%;
            padding: 18px 50px 18px 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #fff;
            font-size: 16px;
            transition: all 0.3s ease;
            outline: none;
        }

        .password-input:focus {
            border-color: #e50914;
            box-shadow: 0 0 20px rgba(229, 9, 20, 0.2);
        }

        .password-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            font-size: 18px;
            transition: color 0.2s;
        }

        .password-toggle:hover {
            color: #fff;
        }

        .password-submit {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #e50914 0%, #b20710 100%);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .password-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(229, 9, 20, 0.4);
        }

        .password-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .password-error {
            background: rgba(229, 9, 20, 0.2);
            border: 1px solid rgba(229, 9, 20, 0.4);
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 20px;
            color: #ff6b6b;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: shake 0.5s ease;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            20%,
            60% {
                transform: translateX(-5px);
            }

            40%,
            80% {
                transform: translateX(5px);
            }
        }

        .password-remember {
            display: flex;
            align-items: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            margin-bottom: 25px;
            cursor: pointer;
        }

        .password-remember input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #e50914;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!-- Initial Loading Screen (Buffer) -->
    <div id="app-loader" class="app-loader">
        <div class="loader-logo" style="display: flex; align-items: center; justify-content: center;"><img
                src="icon.png" style="height: 42px; margin-right: 8px; border-radius: 10px;">ËßÜÁïå
            <span style="font-size:1.2rem; -webkit-text-fill-color: #fff; opacity:0.8;">MAX</span>
        </div>
        <div class="loader-spinner"></div>
    </div>

    <!-- Password Protection Screen -->
    <div id="password-screen" class="password-screen" style="display: none;">
        <div class="password-container">
            <div class="password-logo">
                <div class="password-logo-text" style="display: flex; align-items: center; justify-content: center;">
                    <img src="icon.png" style="height: 32px; margin-right: 8px; border-radius: 8px;">ËßÜÁïå <span
                        style="font-size:1rem; -webkit-text-fill-color: #fff; opacity:0.8;">MAX</span>
                </div>
                <div class="password-logo-subtitle"><i class="fas fa-lock"></i> ÈúÄË¶ÅÂØÜÁ†ÅÊâçËÉΩËÆøÈóÆ</div>
            </div>

            <div id="password-error" class="password-error" style="display: none;">
                <i class="fas fa-exclamation-circle"></i>
                <span id="password-error-text">ÂØÜÁ†ÅÈîôËØØÔºåËØ∑ÈáçËØï</span>
            </div>

            <form id="password-form" onsubmit="return handlePasswordSubmit(event);">
                <div class="password-input-group">
                    <input type="password" id="password-input" class="password-input" placeholder="ËØ∑ËæìÂÖ•ËÆøÈóÆÂØÜÁ†Å"
                        autocomplete="current-password" required>
                    <button type="button" class="password-toggle" onclick="togglePasswordVisibility()">
                        <i id="password-eye" class="fas fa-eye"></i>
                    </button>
                </div>

                <label class="password-remember">
                    <input type="checkbox" id="remember-password" checked>
                    <span>ËÆ∞‰ΩèÁôªÂΩïÁä∂ÊÄÅ (1Âπ¥)</span>
                </label>

                <button type="submit" class="password-submit" id="password-submit-btn">
                    <i class="fas fa-unlock"></i>
                    <span>È™åËØÅÂØÜÁ†Å</span>
                </button>
            </form>
        </div>
    </div>

    <div id="app" v-cloak>

        <nav class="navbar-custom" :class="{ 'scrolled': scrollY > 50 }" v-show="!searched">
            <div class="brand" @click="goHome" style="cursor: pointer; display: flex; align-items: center;"><img
                    src="icon.png" style="height: 28px; margin-right: 6px; border-radius: 6px;">ËßÜÁïå <span
                    style="font-size:12px; color:#666; font-weight:normal; margin-left: 2px;">MAX</span></div>
        </nav>

        <!-- Back to Top Button -->
        <button class="btn-top" :class="{ show: scrollY > 500 }" @click="scrollToTop">
            <i class="fas fa-arrow-up"></i>
        </button>

        <!-- 1. Hero Carousel -->
        <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="6000"
            v-if="!searched">
            <div class="carousel-inner" v-if="heroList.length > 0">
                <div class="carousel-item" v-for="(item, index) in heroList" :key="index"
                    :class="{ active: index === 0 }">
                    <div class="hero-bg" :style="{ backgroundImage: 'url(' + item.backdrop + ')' }"></div>
                    <div class="hero-overlay">
                        <div class="hero-content">
                            <div class="hero-tag">Êú¨Âë® TOP {{ index + 1 }}</div>
                            <h1 class="hero-title">{{ item.title }}</h1>
                            <p class="hero-desc">{{ item.overview }}</p>
                            <div class="hero-btns" style="display: flex; gap: 15px; flex-wrap: wrap;">
                                <button class="btn-play" @click="autoSearch(item.title)"><i class="fas fa-play"></i>
                                    Êí≠Êîæ</button>
                                <button class="btn-info" @click="showMovieInfo(item.rawData)"><i
                                        class="fas fa-info-circle"></i> Êõ¥Â§ö‰ø°ÊÅØ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Search -->
        <div class="search-section"
            :style="{ marginTop: searched ? '60px' : '-35px', position: searched ? 'relative' : 'sticky' }">
            <div class="search-box-wrapper" :class="{ 'compact': !searched && scrollY > 400 }">
                <i class="fas fa-search search-icon" @click="doSearch"></i>
                <input type="text" v-model="keyword" @keyup.enter="doSearch" @input="debouncedSearch"
                    class="search-input" placeholder="ËæìÂÖ•ÁâáÂêçÊàñÂâßÈõÜÂêçÁß∞...">
            </div>
        </div>

        <div v-if="!searched">
            <!-- ÂàÜÁ±ªÂØºËà™Ê†è -->
            <div class="category-nav-container animate__animated animate__fadeInUp" style="margin-bottom: 40px;">
                <div class="category-item" v-for="item in categories" :key="item.name" @click="handleCatClick(item)">
                    <div class="cat-icon" :style="{ background: item.color }">
                        <i :class="['fas', item.icon]"></i>
                    </div>
                    <span>{{ item.name }}</span>
                </div>
            </div>
            <!-- Âä®ÊÄÅÁîüÊàêÁöÑÊ¶úÂçï Rows -->
            <div class="section-container animate__animated animate__fadeInUp"
                v-for="(config, key, index) in rowConfigs" :key="key" :ref="key + '-section'" :data-row-key="key">
                <!-- Ê†áÈ¢òÂå∫ÔºàÂßãÁªàÊòæÁ§∫ÔºåÁî®‰∫éÊáíÂä†ËΩΩËß¶ÂèëÔºâ -->
                <div class="section-header" style="display: flex; align-items: center;">
                    <div class="section-line"></div>
                    <div class="section-title"><i :class="['fas', config.icon]"></i> {{ config.title }}</div>
                    <span class="expand-toggle" :class="{ expanded: expandedRows[key] }" @click="toggleRowExpand(key)"
                        v-show="rowLists[key] && rowLists[key].length > 0">
                        {{ expandedRows[key] ? 'Êî∂Ëµ∑' : 'Â±ïÂºÄ' }}
                        <i class="fas fa-chevron-down"></i>
                    </span>
                    <!-- Âä†ËΩΩ‰∏≠ÊèêÁ§∫ -->
                    <span v-if="!rowLists[key]" style="margin-left: 15px; color: #666; font-size: 12px;">
                        <i class="fas fa-spinner fa-spin"></i> Âä†ËΩΩ‰∏≠...
                    </span>
                </div>
                <!-- ÂÜÖÂÆπÂå∫ÔºàÊúâÊï∞ÊçÆÊó∂ÊòæÁ§∫Ôºâ -->
                <template v-if="rowLists[key] && rowLists[key].length > 0">
                    <!-- Êî∂Ëµ∑Áä∂ÊÄÅÔºöÊ®™ÂêëÊªöÂä® -->
                    <div class="scroll-container" v-show="!expandedRows[key]">
                        <button class="scroll-btn left" @click="scrollRow(key, -1)"><i
                                class="fas fa-chevron-left"></i></button>
                        <div class="hot-row" :ref="key">
                            <div class="hot-card" v-for="item in rowLists[key]" :key="item.id"
                                @click="autoSearch(item.title || item.name)">
                                <div class="poster-wrap">
                                    <img :src="getPosterUrl(item.poster_path)" loading="lazy">
                                    <div class="rating-badge"><i class="fas fa-star text-warning"></i> {{
                                        item.vote_average
                                        ? item.vote_average.toFixed(1) : 'N/A' }}</div>
                                </div>
                                <div class="movie-name">{{ item.title || item.name }}</div>
                                <div class="movie-date">{{ (item.release_date || item.first_air_date ||
                                    '').split('-')[0] }}
                                </div>
                            </div>
                        </div>
                        <button class="scroll-btn right" @click="scrollRow(key, 1)"><i
                                class="fas fa-chevron-right"></i></button>
                    </div>
                    <!-- Â±ïÂºÄÁä∂ÊÄÅÔºöÂàÜÈ°µÁΩëÊ†ºÂ∏ÉÂ±Ä -->
                    <div class="grid-expanded" v-show="expandedRows[key]">
                        <div class="hot-card" v-for="item in getPagedItems(key)" :key="'grid-' + item.id"
                            @click="autoSearch(item.title || item.name)">
                            <div class="poster-wrap">
                                <img :src="getPosterUrl(item.poster_path)">
                                <div class="rating-badge"><i class="fas fa-star text-warning"></i> {{ item.vote_average
                                    ? item.vote_average.toFixed(1) : 'N/A' }}</div>
                            </div>
                            <div class="movie-name">{{ item.title || item.name }}</div>
                            <div class="movie-date">{{ (item.release_date || item.first_air_date || '').split('-')[0] }}
                            </div>
                        </div>
                        <!-- ÂàÜÈ°µÊéßÂà∂Âå∫ -->
                        <div class="pagination-controls">
                            <button class="page-btn" @click="changeViewPage(key, -1)"
                                :disabled="(viewPages[key] || 1) <= 1">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <div class="page-info">
                                <span class="page-num">{{ viewPages[key] || 1 }}</span> È°µ
                            </div>
                            <button class="page-btn" @click="changeViewPage(key, 1)"
                                :disabled="(viewPages[key] || 1) >= getTotalViewPages(key) && rowConfigs[key].page >= (rowConfigs[key].totalPages || 999)">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <!-- Search Results -->
        <div id="search-result-anchor" class="section-container" v-if="searched">
            <div class="d-flex align-items-center gap-2 mb-5 mt-2">
                <button class="btn btn-outline-secondary rounded-pill px-3 px-md-4 py-2" @click="goHome"
                    style="color: #fff; border-color: rgba(255,255,255,0.3);">
                    <i class="fas fa-arrow-left me-0 me-md-2"></i><span class="d-none d-md-inline">ËøîÂõûÈ¶ñÈ°µ</span>
                </button>
                <div class="section-header mb-0 ms-3 ms-md-4">
                    <div class="section-line"></div>
                    <div class="section-title">Ê≠£Âú®ÊêúÁ¥¢: "{{ keyword }}"</div>
                </div>
            </div>

            <!-- ÊêúÁ¥¢ÁªìÊûúÁΩëÊ†º (Âç≥‰ΩøÂú® loading ‰πüÂèØ‰ª•ÊòæÁ§∫) -->
            <div class="result-grid" v-if="groupedList.length > 0">
                <div class="result-card" v-for="group in groupedList" :key="group.name" @click="openDetail(group)">
                    <div class="poster-wrap">
                        <img v-if="!isFallback(group.name)" :src="finalPoster(group)" :key="finalPoster(group)"
                            referrerpolicy="no-referrer" @error="handleImgError(group.name)" loading="lazy">
                        <div v-else class="poster-fallback">
                            <i class="fas fa-film mb-2 opacity-50"></i>
                            <div style="font-size:12px; color:#999">{{ group.name }}</div>
                        </div>
                        <div class="rating-badge" style="background:var(--accent); color:#fff; border:none;">
                            {{ group.sources.length }} Ê∫ê
                        </div>
                    </div>
                    <div class="movie-name">{{ group.name }}</div>
                </div>
            </div>

            <!-- Âä†ËΩΩ‰∏≠ÊèêÁ§∫ (Â¶ÇÊûúÊ≤°ÁªìÊûúÂ±Ö‰∏≠ÔºåÊúâÁªìÊûúÂú®Â∫ïÈÉ®) -->
            <div v-if="loading" class="text-center py-4">
                <div class="spinner-border text-danger" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <div class="mt-2 text-muted small" v-if="groupedList.length > 0">Ê≠£Âú®ÊêúÁ¥¢Êõ¥Â§öËµÑÊ∫ê...</div>
                <div class="mt-2 text-muted small" v-else>Ê≠£Âú®ÂÖ®ÁΩëÊêúÁ¥¢...</div>
            </div>

            <div v-if="!loading && groupedList.length === 0" class="text-center"
                style="padding: 60px 20px; margin-top: -20px;">
                <i class="fas fa-search" style="font-size: 48px; color: #444; margin-bottom: 20px;"></i>
                <h4 style="color: #888; margin-bottom: 15px;">ÊöÇÊú™ÊâæÂà∞„Äå{{ keyword }}„ÄçÁöÑÁõ∏ÂÖ≥ËµÑÊ∫ê</h4>
                <div style="color: #666; font-size: 14px; line-height: 1.8; max-width: 400px; margin: 0 auto;">
                    <p style="margin-bottom: 8px;">üìå Êñ∞‰∏äÊò†ÁöÑÁîµÂΩ±/ÂâßÈõÜÂèØËÉΩÈúÄË¶ÅÁ≠âÂæÖ1-2Âë®ÊâçÊúâËµÑÊ∫ê</p>
                    <p style="margin-bottom: 8px;">üí° Â∞ùËØïÊêúÁ¥¢ÁîµÂΩ±ÁöÑ‰∏≠ÊñáÂêç</p>
                    <p>üîç ÊàñÂ∞ùËØïÊêúÁ¥¢ÂÖ∂‰ªñÁÉ≠Èó®ÂΩ±Áâá</p>
                </div>
                <button class="btn btn-outline-danger mt-4" @click="clearSearch"
                    style="border-radius: 20px; padding: 8px 25px;">
                    <i class="fas fa-home"></i> ËøîÂõûÈ¶ñÈ°µ
                </button>
            </div>
        </div>

        <div class="footer">
            <div style="font-size:10px; margin-top:5px; opacity:0.5;">Data provided by TMDb & Maccms APIs</div>
        </div>

        <!-- ‚òÖ‚òÖ‚òÖ TMDb ÁîµÂΩ±ËØ¶ÊÉÖÂºπÁ™ó ‚òÖ‚òÖ‚òÖ -->
        <div class="info-modal-overlay" v-if="showInfoModal" @click.self="showInfoModal = false">
            <div class="info-modal" v-if="infoModalData">
                <button class="info-modal-close" @click="showInfoModal = false"><i class="fas fa-times"></i></button>
                <div class="info-modal-backdrop"
                    :style="{ backgroundImage: 'url(' + TMDB_BACKDROP_URL + infoModalData.backdrop_path + ')' }"></div>
                <div class="info-modal-content">
                    <div class="info-modal-poster">
                        <img :src="TMDB_IMG_URL + infoModalData.poster_path"
                            :alt="infoModalData.title || infoModalData.name">
                    </div>
                    <div class="info-modal-details">
                        <h2>{{ infoModalData.title || infoModalData.name }}</h2>
                        <div class="info-modal-meta">
                            <span class="info-rating"><i class="fas fa-star text-warning"></i> {{
                                infoModalData.vote_average?.toFixed(1) }}</span>
                            <span>{{ (infoModalData.release_date || infoModalData.first_air_date)?.split('-')[0]
                                }}</span>
                            <span v-if="infoModalData.runtime">{{ infoModalData.runtime }} ÂàÜÈíü</span>
                        </div>
                        <p class="info-overview">{{ infoModalData.overview || 'ÊöÇÊó†ÁÆÄ‰ªã' }}</p>
                        <div class="info-modal-btns">
                            <button class="btn-play"
                                @click="showInfoModal = false; autoSearch(infoModalData.title || infoModalData.name)">
                                <i class="fas fa-play"></i> Á´ãÂç≥Êí≠Êîæ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚òÖ‚òÖ‚òÖ Êí≠ÊîæËØ¶ÊÉÖÈ°µ (ÂΩ±Èô¢Â∏ÉÂ±Ä) ‚òÖ‚òÖ‚òÖ -->
        <div class="detail-overlay" :class="{ active: showDetail }">
            <div class="close-btn" @click="closeDetail"><i class="fas fa-times"></i></div>

            <div class="player-layout" v-if="currentGroup">

                <!-- 1. È°∂ÈÉ®ÔºöÊ†áÈ¢òÊ†è + ÊäïÂ±è -->
                <div class="video-header">
                    <div>
                        <h1 class="video-title">{{ currentGroup.name }}</h1>
                        <div class="video-meta">
                            Ê≠£Âú®Êí≠Êîæ: <span class="text-white fw-bold">{{ currentSource?.site_name }}</span>
                        </div>
                    </div>
                    <button class="btn-cast" @click="castVideo">
                        <i class="fas fa-tv"></i> ‰∏ÄÈîÆÊäïÂ±è
                    </button>
                </div>

                <!-- 2. ‰∏≠ÈÉ®ÔºöË∂ÖÂ§ßÊí≠ÊîæÂô® -->
                <div class="player-box" style="position: relative;">
                    <div id="dplayer" style="width: 100%; height: 100%;"></div>
                    <!-- Ëá™Âä®ÂàáÊç¢Á∫øË∑ØÊèêÁ§∫ -->
                    <div v-if="autoRetryMessage" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                               background: rgba(0,0,0,0.9); padding: 20px 30px; border-radius: 10px; 
                               text-align: center; z-index: 100; border: 1px solid rgba(255,255,255,0.1);">
                        <i class="fas fa-sync-alt fa-spin"
                            style="font-size: 24px; color: #e50914; margin-bottom: 10px;"></i>
                        <div style="color: #fff; font-weight: bold;">{{ autoRetryMessage }}</div>
                        <div style="color: #888; font-size: 12px; margin-top: 5px;">Ê≠£Âú®Ëá™Âä®ÂàáÊç¢...</div>
                    </div>
                </div>

                <!-- 3. Â∫ïÈÉ®ÔºöÊéßÂà∂Èù¢Êùø -->
                <div class="controls-area">
                    <!-- ÂâßÈõÜÁÆÄ‰ªã -->
                    <div class="mb-4" v-if="currentSource">
                        <div class="panel-title">ÂâßÊÉÖÁÆÄ‰ªã</div>
                        <p
                            style="color: #999; font-size: 13px; line-height: 1.7; max-height: 80px; overflow-y: auto; margin: 0;">
                            <span v-if="loadingDetail"><i class="fas fa-spinner fa-spin"></i> Âä†ËΩΩ‰∏≠...</span>
                            <span v-else>{{ stripHtml(currentSource.vod_content) || 'ÊöÇÊó†ÁÆÄ‰ªã‰ø°ÊÅØ' }}</span>
                        </p>
                    </div>

                    <!-- Á∫øË∑ØÈÄâÊã© -->
                    <div class="mb-4">
                        <div class="panel-title">
                            ÂàáÊç¢Á∫øË∑Ø
                            <span v-if="isTestingSources" style="font-size: 12px; color: #888; font-weight: normal;">
                                <i class="fas fa-spinner fa-spin"></i> Ê≠£Âú®ÊµãÈÄü...
                            </span>
                        </div>

                        <!-- ÊµãÈÄüÁ±ªÂûãÂõæ‰æã -->
                        <div v-if="!isTestingSources && (fastSources.length > 0 || slowSources.length > 0)"
                            style="font-size: 11px; color: #666; margin-bottom: 10px; display: flex; gap: 15px; align-items: center;">
                            <span style="display: flex; align-items: center; gap: 4px;">
                                <span
                                    style="background: linear-gradient(135deg, #10b981, #059669); color: #fff; padding: 1px 5px; border-radius: 3px; font-size: 9px;">Áõ¥Ëøû</span>
                                Áî®Êà∑Á´ØÊµãÈÄüÔºàÊõ¥ÂáÜÁ°ÆÔºâ
                            </span>
                            <span style="display: flex; align-items: center; gap: 4px;">
                                <span
                                    style="background: linear-gradient(135deg, #6366f1, #4f46e5); color: #fff; padding: 1px 5px; border-radius: 3px; font-size: 9px;">‰ª£ÁêÜ</span>
                                ÊúçÂä°Âô®ÊµãÈÄü
                            </span>
                        </div>

                        <!-- Âø´ÈÄüÁ∫øË∑ØÂàóË°® (< 600ms) -->
                        <div class="source-list" v-if="fastSources.length > 0 || slowSources.length > 0">
                            <!-- Âø´ÈÄüÁ∫øË∑Ø -->
                            <div v-for="source in fastSources" class="source-pill"
                                :class="{ active: currentSource?.site_key === source.site_key }"
                                @click="switchSource(source)">
                                <span>{{ source.site_name }}</span>
                                <span class="latency-dot" :class="getLatencyClass(source.latency)"></span>
                                <span style="font-size:10px; opacity:0.6;">{{source.latency}}ms</span>
                                <span v-if="source._testType === 'direct'"
                                    style="background: linear-gradient(135deg, #10b981, #059669); color: #fff; padding: 1px 5px; border-radius: 3px; font-size: 9px; margin-left: 4px;">
                                    Áõ¥Ëøû
                                </span>
                                <span v-else
                                    style="background: linear-gradient(135deg, #6366f1, #4f46e5); color: #fff; padding: 1px 5px; border-radius: 3px; font-size: 9px; margin-left: 4px;">
                                    ‰ª£ÁêÜ
                                </span>
                            </div>
                            <!-- ÊÖ¢ÈÄüÁ∫øË∑ØÂàÜÈöîÁ¨¶ -->
                            <div v-if="slowSources.length > 0 && fastSources.length > 0"
                                style="width: 100%; font-size: 11px; color: #666; padding: 8px 0; border-top: 1px solid #333; margin-top: 5px;">
                                <i class="fas fa-hourglass-half"></i> ËæÉÊÖ¢Á∫øË∑Ø ({{ slowSources.length }})
                            </div>
                            <!-- ÊÖ¢ÈÄüÁ∫øË∑Ø -->
                            <div v-for="source in slowSources" class="source-pill"
                                :class="{ active: currentSource?.site_key === source.site_key }" style="opacity: 0.7;"
                                @click="switchSource(source)">
                                <span>{{ source.site_name }}</span>
                                <span class="latency-dot" :class="getLatencyClass(source.latency)"></span>
                                <span style="font-size:10px; opacity:0.6;">{{source.latency}}ms</span>
                                <span v-if="source._testType === 'direct'"
                                    style="background: linear-gradient(135deg, #10b981, #059669); color: #fff; padding: 1px 5px; border-radius: 3px; font-size: 9px; margin-left: 4px;">
                                    Áõ¥Ëøû
                                </span>
                                <span v-else
                                    style="background: linear-gradient(135deg, #6366f1, #4f46e5); color: #fff; padding: 1px 5px; border-radius: 3px; font-size: 9px; margin-left: 4px;">
                                    ‰ª£ÁêÜ
                                </span>
                            </div>
                        </div>

                        <!-- ÂÖ®ÈÉ®‰∏çÂèØÁî®ÊèêÁ§∫ -->
                        <div v-else-if="!isTestingSources && fastSources.length === 0 && slowSources.length === 0"
                            class="text-center py-4"
                            style="background: rgba(255,0,0,0.1); border-radius: 8px; border: 1px solid rgba(255,0,0,0.2);">
                            <i class="fas fa-exclamation-triangle text-warning" style="font-size: 24px;"></i>
                            <div class="mt-2" style="color: #ff6b6b;">ÊâÄÊúâÈááÈõÜÁ´ôÂùá‰∏çÂèØÁî®</div>
                            <div class="mt-1" style="font-size: 12px; color: #888;">ËØ∑Á®çÂêéÈáçËØïÊàñÂ∞ùËØïÊêúÁ¥¢ÂÖ∂‰ªñËµÑÊ∫ê</div>
                        </div>
                    </div>

                    <!-- ÈÄâÈõÜÂàóË°® (ÂÖ®ÂÆΩÁΩëÊ†º) -->
                    <div>
                        <div class="panel-title">ÈÄâÈõÜÊí≠Êîæ</div>
                        <div v-if="loadingDetail" class="text-center py-5 text-muted"><i
                                class="fas fa-spinner fa-spin"></i> Âä†ËΩΩ‰∏≠...</div>
                        <div v-else class="ep-grid">
                            <div v-for="ep in episodeList" class="ep-btn" :class="{ active: currentUrl === ep.url }"
                                @click="play(ep.url)">
                                {{ ep.name }}
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- Password Verification Script (runs before Vue) -->
    <script data-cfasync="false">
        // SHA256 Hash Function (Pure JS implementation)
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        // Storage Keys
        const AUTH_STORAGE_KEY = 'emax_auth_hash';
        const AUTH_EXPIRY_KEY = 'emax_auth_expiry';

        // Check if already authenticated
        function isAuthenticated() {
            const storedHash = localStorage.getItem(AUTH_STORAGE_KEY);
            const expiry = localStorage.getItem(AUTH_EXPIRY_KEY);

            if (!storedHash || !expiry) return false;

            // Check if expired
            if (Date.now() > parseInt(expiry)) {
                localStorage.removeItem(AUTH_STORAGE_KEY);
                localStorage.removeItem(AUTH_EXPIRY_KEY);
                return false;
            }

            return storedHash;
        }

        // Toggle password visibility
        function togglePasswordVisibility() {
            const input = document.getElementById('password-input');
            const eye = document.getElementById('password-eye');

            if (input.type === 'password') {
                input.type = 'text';
                eye.classList.remove('fa-eye');
                eye.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                eye.classList.remove('fa-eye-slash');
                eye.classList.add('fa-eye');
            }
        }

        // Show error message
        function showPasswordError(message) {
            const errorDiv = document.getElementById('password-error');
            const errorText = document.getElementById('password-error-text');
            errorText.textContent = message;
            errorDiv.style.display = 'flex';
        }

        // Handle password submit
        async function handlePasswordSubmit(event) {
            event.preventDefault();

            const input = document.getElementById('password-input');
            const submitBtn = document.getElementById('password-submit-btn');
            const remember = document.getElementById('remember-password').checked;
            const errorDiv = document.getElementById('password-error');

            // Hide previous error
            errorDiv.style.display = 'none';

            // Disable button
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>È™åËØÅ‰∏≠...</span>';

            try {
                const password = input.value;
                const passwordHash = await sha256(password);

                // Verify with server
                const res = await fetch('/api/auth/verify', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ passwordHash })
                });

                const data = await res.json();

                if (data.success) {
                    // Save auth state
                    if (remember) {
                        const expiry = Date.now() + (365 * 24 * 60 * 60 * 1000); // 365 days
                        localStorage.setItem(AUTH_STORAGE_KEY, passwordHash);
                        localStorage.setItem(AUTH_EXPIRY_KEY, expiry.toString());
                    }

                    // Start App and wait for data
                    if (window.startApp) {
                        await window.startApp();
                    }

                    // Hide password screen with animation
                    const screen = document.getElementById('password-screen');
                    screen.classList.add('hidden');

                    setTimeout(() => {
                        screen.style.display = 'none';
                    }, 500);
                } else {
                    showPasswordError('ÂØÜÁ†ÅÈîôËØØÔºåËØ∑ÈáçËØï');
                    input.value = '';
                    input.focus();
                }
            } catch (e) {
                showPasswordError('È™åËØÅÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
                console.error('Auth error:', e);
            }

            // Re-enable button
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-unlock"></i><span>È™åËØÅÂØÜÁ†Å</span>';

            return false;
        }

        // Check auth status on page load
        async function checkAuthStatus() {
            try {
                const res = await fetch('/api/auth/check');
                const data = await res.json();

                if (!data.requirePassword) {
                    // No password required, start app directly
                    window.startApp && window.startApp();
                    return;
                }

                // Password required, check if already authenticated
                const storedHash = isAuthenticated();
                if (storedHash) {
                    // Verify stored hash is still valid
                    const verifyRes = await fetch('/api/auth/verify', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ passwordHash: storedHash })
                    });
                    const verifyData = await verifyRes.json();

                    if (verifyData.success) {
                        // Stored auth is valid, start app
                        window.startApp && window.startApp();
                        return;
                    } else {
                        // Stored auth is invalid, clear it
                        localStorage.removeItem(AUTH_STORAGE_KEY);
                        localStorage.removeItem(AUTH_EXPIRY_KEY);
                    }
                }

                // Show password screen
                const loader = document.getElementById('app-loader');
                const screen = document.getElementById('password-screen');

                // Hide loader, show password screen
                if (loader) loader.classList.add('hidden');
                screen.style.display = 'flex';

                // Focus input
                setTimeout(() => {
                    document.getElementById('password-input').focus();
                }, 100);

            } catch (e) {
                console.error('Auth check error:', e);
                // On error, try to start app anyway
                window.startApp && window.startApp();
            }
        }

        // Run check when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            checkAuthStatus();
        });
    </script>

    <script data-cfasync="false">
        const { createApp, reactive } = Vue;
        // TMDb API ÈÖçÁΩÆ (‰ªéÊúçÂä°Á´ØËé∑Âèñ)
        let TMDB_API_KEY = "";

        // TMDb URL ÈÖçÁΩÆ (‰ΩøÁî®Êú¨Âú∞ÊúçÂä°Âô®ÁºìÂ≠òÂèç‰ª£)
        let TMDB_BASE_URL = "https://api.themoviedb.org/3";
        // ‰ΩøÁî®Êú¨Âú∞ API ÁºìÂ≠òÂõæÁâá
        let TMDB_IMG_URL = "/api/tmdb-image/w342";
        let TMDB_BACKDROP_URL = "/api/tmdb-image/original";

        // TMDB Âèç‰ª£ÈÖçÁΩÆÁé∞Âú®ÈÄöËøáÁéØÂ¢ÉÂèòÈáè TMDB_PROXY_URL ÈÖçÁΩÆ
        // ËØ¶ËßÅ .env.example Âíå cloudflare-tmdb-proxy.js

        let dp = null;

        createApp({
            data() {
                return {
                    searchTimer: null,  // Èò≤ÊäñÊêúÁ¥¢ÂÆöÊó∂Âô®
                    isTestingSources: false,  // Ê≠£Âú®ÊµãÈÄüÁä∂ÊÄÅ
                    showInfoModal: false,  // ÁîµÂΩ±ËØ¶ÊÉÖÂºπÁ™ó
                    infoModalData: null,   // ÂºπÁ™óÊï∞ÊçÆ
                    TMDB_IMG_URL: TMDB_IMG_URL,  // Ê®°Êùø‰∏≠‰ΩøÁî®
                    TMDB_BACKDROP_URL: TMDB_BACKDROP_URL,

                    // ÊÅ¢Â§çÁº∫Â§±ÁöÑÁä∂ÊÄÅÂèòÈáè
                    keyword: '', loading: false, searched: false, rawList: [],
                    showDetail: false, currentGroup: null, currentSource: null,
                    episodeList: [], currentUrl: '', loadingDetail: false,
                    imageMap: {}, fallbackMap: {}, heroList: [], scrollY: 0,
                    hotList: [],
                    sitesMap: {},  // ÁºìÂ≠òÁ´ôÁÇπ‰ø°ÊÅØÔºàÁî®‰∫éÂÆ¢Êà∑Á´ØÊµãÈÄüÔºâ
                    playbackErrorCount: 0,  // Êí≠ÊîæÂ§±Ë¥•ËÆ°Êï∞
                    isAutoRetrying: false,  // ÊòØÂê¶Ê≠£Âú®Ëá™Âä®ÈáçËØï
                    autoRetryMessage: '',  // Ëá™Âä®ÂàáÊç¢ÊèêÁ§∫‰ø°ÊÅØ

                    // === Âä®ÊÄÅÊ¶úÂçïÈÖçÁΩÆ ===
                    rowLists: {}, // Â≠òÂÇ®ÂêÑÊ¶úÂçïÊï∞ÊçÆ { movieRow: [...], ... }
                    expandedRows: {}, // Â≠òÂÇ®ÂêÑÊ¶úÂçïÁöÑÂ±ïÂºÄÁä∂ÊÄÅ { movieRow: true, ... }
                    viewPages: {}, // Â≠òÂÇ®ÂêÑÊ¶úÂçïÂ±ïÂºÄÊó∂ÁöÑÊü•ÁúãÈ°µÁ†Å { movieRow: 1, ... }
                    pageLoadingKeys: {}, // Èò≤Ê≠¢ÈáçÂ§çÂø´ÈÄüÁÇπÂáªÂä†ËΩΩ { movieRow: true, ... }
                    rowConfigs: {
                        movieRow: { title: 'ÂÖ®ÁêÉÈúáÊÑü¬∑ÁîµÂΩ±Ê¶ú', icon: 'fa-film', path: '/trending/movie/week', params: '', page: 1 },
                        tvRow: { title: 'ÂÖ®ÁêÉÂøÖËøΩ¬∑ÂâßÈõÜÊ¶ú', icon: 'fa-tv', path: '/trending/tv/week', params: '', page: 1 },
                        cnRow: { title: 'ÂçéËØ≠Âº∫Ê°£¬∑ÂõΩ‰∫ßÂâß', icon: 'fa-dragon', path: '/discover/tv', params: 'with_origin_country=CN&sort_by=popularity.desc', page: 1 },
                        usRow: { title: 'ÁæéÂâß¬∑È´òËÉΩÂâßÈõÜ', icon: 'fa-flag-usa', path: '/discover/tv', params: 'with_origin_country=US&sort_by=popularity.desc', page: 1 },
                        krjpRow: { title: 'Êó•Èü©ÊΩÆÊµÅ¬∑ÂâßÈõÜ', icon: 'fa-mask', path: '/discover/tv', params: 'with_origin_country=KR|JP&sort_by=popularity.desc', page: 1 },
                        animeRow: { title: '‰∫åÊ¨°ÂÖÉ¬∑Âä®Êº´Áï™Ââß', icon: 'fa-ghost', path: '/discover/tv', params: 'with_genres=16&sort_by=popularity.desc', page: 1 },
                        scifiRow: { title: 'ÁßëÂπªÂ•áÂπª¬∑ÊòüÈôÖÁ©øË∂ä', icon: 'fa-rocket', path: '/discover/movie', params: 'with_genres=878,14&sort_by=popularity.desc', page: 1 },
                        actionRow: { title: 'Âä®‰ΩúÂ§ßÁâá¬∑ËÇæ‰∏äËÖ∫Á¥†', icon: 'fa-bomb', path: '/discover/movie', params: 'with_genres=28&sort_by=popularity.desc', page: 1 },
                        comedyRow: { title: 'ÂºÄÂøÉÂñúÂâß¬∑Ëß£ÂéãÂøÖÂ§á', icon: 'fa-laugh-squint', path: '/discover/movie', params: 'with_genres=35&sort_by=popularity.desc', page: 1 },
                        crimeRow: { title: 'ÁäØÁΩ™ÊÇ¨Áñë¬∑ÁÉßËÑëÁ•û‰Ωú', icon: 'fa-user-secret', path: '/discover/movie', params: 'with_genres=80,9648&sort_by=popularity.desc', page: 1 },
                        romanceRow: { title: 'Áà±ÊÉÖ¬∑Êµ™Êº´Êª°Â±ã', icon: 'fa-heart', path: '/discover/movie', params: 'with_genres=10749&sort_by=popularity.desc', page: 1 },
                        familyRow: { title: 'ÂêàÂÆ∂Ê¨¢¬∑Ê∏©È¶®Êó∂Âàª', icon: 'fa-home', path: '/discover/movie', params: 'with_genres=10751&sort_by=popularity.desc', page: 1 },
                        docRow: { title: 'Á∫™ÂΩïÁâá¬∑Êé¢Á¥¢‰∏ñÁïå', icon: 'fa-video', path: '/discover/movie', params: 'with_genres=99&sort_by=popularity.desc', page: 1 },
                        warRow: { title: 'Êàò‰∫â¬∑Âè≤ËØóÂ∑®Âà∂', icon: 'fa-fighter-jet', path: '/discover/movie', params: 'with_genres=10752&sort_by=popularity.desc', page: 1 },
                        horrorRow: { title: 'ÊÅêÊÄñÊÉäÊÇö¬∑ËÉÜÂ∞èÂãøÂÖ•', icon: 'fa-skull', path: '/discover/movie', params: 'with_genres=27&sort_by=popularity.desc', page: 1 },
                        mysteryRow: { title: 'ÁÉßËÑëÊÇ¨Áñë¬∑Â±ÇÂ±ÇÂèçËΩ¨', icon: 'fa-search', path: '/discover/movie', params: 'with_genres=9648&sort_by=popularity.desc', page: 1 },
                        fantasyRow: { title: 'Â•áÂπªÂÜíÈô©¬∑ÂºÇÊÉ≥Â§©ÂºÄ', icon: 'fa-hat-wizard', path: '/discover/movie', params: 'with_genres=14&sort_by=popularity.desc', page: 1 },
                        varietyRow: { title: 'ÁÉ≠Èó®ÁªºËâ∫¬∑Â®±‰πêÁîüÊ¥ª', icon: 'fa-microphone-alt', path: '/discover/tv', params: 'with_genres=10764&sort_by=popularity.desc', page: 1 },
                        historyRow: { title: 'ÂéÜÂè≤¬∑Â≤ÅÊúàÈïøÊ≤≥', icon: 'fa-landmark', path: '/discover/movie', params: 'with_genres=36&sort_by=popularity.desc', page: 1 },
                        adventureRow: { title: 'ÊÉäÈô©ÂÜíÈô©¬∑ÂãáÊï¢ËÄÖÊ∏∏Êàè', icon: 'fa-compass', path: '/discover/movie', params: 'with_genres=12&sort_by=popularity.desc', page: 1 },
                    },

                    movieList: [], tvList: [], list_cn: [], list_krjp: [],
                    list_scifi: [], list_action: [], list_comedy: [], list_horror: [],
                    categories: [
                        { name: 'ÁîµÂΩ±', icon: 'fa-film', action: 'scroll', value: 'movieRow', color: 'linear-gradient(135deg, #FF512F 0%, #DD2476 100%)' },
                        { name: 'ÂâßÈõÜ', icon: 'fa-tv', action: 'scroll', value: 'tvRow', color: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)' },
                        { name: 'ÂõΩ‰∫ß', icon: 'fa-dragon', action: 'scroll', value: 'cnRow', color: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' },
                        { name: 'ÁæéÂâß', icon: 'fa-flag-usa', action: 'scroll', value: 'usRow', color: 'linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)' },
                        { name: 'Êó•Èü©', icon: 'fa-mask', action: 'scroll', value: 'krjpRow', color: 'linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)' },
                        { name: 'Âä®Êº´', icon: 'fa-ghost', action: 'scroll', value: 'animeRow', color: 'linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)' },
                        { name: 'Âä®‰Ωú', icon: 'fa-bomb', action: 'scroll', value: 'actionRow', color: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)' },
                        { name: 'ÁßëÂπª', icon: 'fa-rocket', action: 'scroll', value: 'scifiRow', color: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)' },
                        { name: 'ÂñúÂâß', icon: 'fa-laugh-squint', action: 'scroll', value: 'comedyRow', color: 'linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)' },
                        { name: 'ÁäØÁΩ™', icon: 'fa-user-secret', action: 'scroll', value: 'crimeRow', color: 'linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)' },
                        { name: 'Áà±ÊÉÖ', icon: 'fa-heart', action: 'scroll', value: 'romanceRow', color: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)' },
                        { name: 'ÊÇ¨Áñë', icon: 'fa-search', action: 'scroll', value: 'mysteryRow', color: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' },
                        { name: 'ÂéÜÂè≤', icon: 'fa-landmark', action: 'scroll', value: 'historyRow', color: 'linear-gradient(135deg, #accbee 0%, #e7f0fd 100%)' },
                        { name: 'ÂÆ∂Â∫≠', icon: 'fa-home', action: 'scroll', value: 'familyRow', color: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)' },
                        { name: 'Á∫™ÂΩï', icon: 'fa-video', action: 'scroll', value: 'docRow', color: 'linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%)' },
                        { name: 'Êàò‰∫â', icon: 'fa-fighter-jet', action: 'scroll', value: 'warRow', color: 'linear-gradient(135deg, #ff0844 0%, #ffb199 100%)' },
                        { name: 'ÂÜíÈô©', icon: 'fa-compass', action: 'scroll', value: 'adventureRow', color: 'linear-gradient(135deg, #e9defa 0%, #fbfcdb 100%)' },
                        { name: 'ÁªºËâ∫', icon: 'fa-microphone-alt', action: 'scroll', value: 'varietyRow', color: 'linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)' },
                        { name: 'ÊÅêÊÄñ', icon: 'fa-skull', action: 'scroll', value: 'horrorRow', color: 'linear-gradient(135deg, #434343 0%, #000000 100%)' },
                        { name: 'Â•áÂπª', icon: 'fa-hat-wizard', action: 'scroll', value: 'fantasyRow', color: 'linear-gradient(135deg, #fccb90 0%, #d57eeb 100%)' }
                    ]
                }
            },
            async mounted() {
                window.addEventListener('scroll', () => { this.scrollY = window.scrollY; });

                // Store reference to app instance for external access
                window.vueApp = this;

                // ÂÆö‰πâ startApp ÂáΩÊï∞‰æõÂØÜÁ†ÅÈ™åËØÅÊàêÂäüÂêéË∞ÉÁî®
                window.startApp = () => {
                    return this.initApp();
                };
            },
            computed: {
                groupedList() {
                    const groups = {};
                    this.rawList.forEach(item => {
                        const name = item.vod_name;
                        if (!groups[name]) groups[name] = { name: name, pic: item.vod_pic, sources: [] };
                        const isDefault = (url) => !url || url.includes('mac_default') || url.includes('nopic');
                        if (isDefault(groups[name].pic) && !isDefault(item.vod_pic)) groups[name].pic = item.vod_pic;
                        if (isDefault(groups[name].pic)) this.handleImgError(name);

                        groups[name].sources.push({
                            ...item,
                            latency: item.latency || 999
                        });
                    });
                    return Object.values(groups).sort((a, b) => b.sources.length - a.sources.length);
                },
                // Âø´ÈÄüÁ∫øË∑Ø (Âª∂Ëøü < 600ms)
                fastSources() {
                    if (!this.currentGroup || !this.currentGroup.sources) return [];
                    return this.currentGroup.sources.filter(s => {
                        if (s.latency === '...') return false;
                        return typeof s.latency === 'number' && s.latency < 600;
                    });
                },
                // ÊÖ¢ÈÄüÁ∫øË∑Ø (600ms <= Âª∂Ëøü < 9000msÔºåÈùûË∂ÖÊó∂)
                slowSources() {
                    if (!this.currentGroup || !this.currentGroup.sources) return [];
                    return this.currentGroup.sources.filter(s => {
                        if (s.latency === '...') return false;
                        return typeof s.latency === 'number' && s.latency >= 600 && s.latency < 9000;
                    });
                },
                // ÂÖºÂÆπÊóß‰ª£Á†ÅÁöÑ availableSourcesÔºàÂåÖÂê´Âø´ÈÄüÂíåÊÖ¢ÈÄüÔºâ
                availableSources() {
                    return [...this.fastSources, ...this.slowSources];
                }
            },
            methods: {
                async initApp() {
                    // Èò≤Ê≠¢ÈáçÂ§çÂàùÂßãÂåñ
                    if (this._appInitialized) return;
                    this._appInitialized = true;

                    // 1. Ëé∑ÂèñÂêéÁ´ØÈÖçÁΩÆ
                    try {
                        const res = await fetch('/api/config');
                        const config = await res.json();
                        TMDB_API_KEY = config.tmdb_api_key;

                        // Vercel ÂÖºÂÆπÊÄßÊ£ÄÊµã
                        if (config.enable_local_image_cache === false) {
                            console.log('[Config] Vercel ÁéØÂ¢ÉÊ£ÄÊµãÔºöÁ¶ÅÁî®Êú¨Âú∞ÂõæÁâáÁºìÂ≠òÔºå‰ΩøÁî®ÂÆòÊñπÊ∫ê');
                            // ÂõûÈÄÄÂà∞ÂÆòÊñπ CDN
                            this.TMDB_IMG_URL = "https://image.tmdb.org/t/p/w342";
                            this.TMDB_BACKDROP_URL = "https://image.tmdb.org/t/p/original";
                        }

                        // Â¶ÇÊûúÈÖçÁΩÆ‰∫ÜÂèç‰ª£Âú∞ÂùÄÔºåËøõË°å IP Ê£ÄÊµãÂπ∂ÂàáÊç¢
                        if (config.tmdb_proxy_url) {
                            await this.setupTmdbProxy(config.tmdb_proxy_url);
                        }
                    } catch (e) {
                        console.error('Config Load Error:', e);
                    }

                    // 2. Â¶ÇÊûúËé∑ÂèñÂà∞‰∫Ü KeyÔºåÂä†ËΩΩÊï∞ÊçÆ
                    if (TMDB_API_KEY) {
                        await this.fetchHero();
                        this.fetchAllLists();
                    } else {
                        console.warn('TMDB_API_KEY Êú™ÈÖçÁΩÆ');
                    }

                    // 3. ÁßªÈô§ Loading ÈÅÆÁΩ© (Âπ≥ÊªëËøáÊ∏°)
                    setTimeout(() => {
                        const loader = document.getElementById('app-loader');
                        if (loader) loader.classList.add('hidden');
                    }, 300);

                    // 4. Âä†ËΩΩÁ´ôÁÇπ‰ø°ÊÅØÔºàÁî®‰∫éÂÆ¢Êà∑Á´ØÊµãÈÄüÔºâ
                    try {
                        const sitesRes = await fetch('/api/sites');
                        const sitesData = await sitesRes.json();
                        if (sitesData.sites) {
                            sitesData.sites.forEach(site => {
                                this.sitesMap[site.key] = site;
                            });
                        }
                    } catch (e) {
                        console.error('Sites Load Error:', e);
                    }
                },
                // ÂàáÊç¢Ê¶úÂçïÂ±ïÂºÄ/Êî∂Ëµ∑Áä∂ÊÄÅ
                toggleRowExpand(key) {
                    const isExpanding = !this.expandedRows[key];
                    console.log(`[DEBUG toggleRowExpand] key=${key}, isExpanding=${isExpanding}, viewPages[key] before=`, this.viewPages[key]);
                    this.expandedRows = { ...this.expandedRows, [key]: isExpanding };
                    // Â±ïÂºÄÊó∂ÂàùÂßãÂåñÈ°µÁ†Å‰∏∫ 1Ôºà‰ΩøÁî®ÂìçÂ∫îÂºèÊñπÂºèÔºâ
                    if (isExpanding && this.viewPages[key] === undefined) {
                        this.viewPages = { ...this.viewPages, [key]: 1 };
                        console.log(`[DEBUG toggleRowExpand] Initialized viewPages[${key}] = 1`);
                    }
                    console.log(`[DEBUG toggleRowExpand] viewPages[key] after=`, this.viewPages[key]);
                },
                // ÊªöÂä®Âà∞ÊåáÂÆöÂå∫Âüü
                scrollToSection(refName) {
                    let el = this.$refs[refName];
                    if (Array.isArray(el)) el = el[0]; // v-for ref ‰øÆÊ≠£
                    if (el) {
                        const top = el.getBoundingClientRect().top + window.scrollY - 100;
                        window.scrollTo({ top: top, behavior: 'smooth' });
                    }
                },

                // Ëé∑ÂèñÂΩìÂâçÊü•ÁúãÈ°µÁöÑÊï∞ÊçÆÔºàÊØèÈ°µ20Êù°Ôºâ
                getPagedItems(key) {
                    const items = this.rowLists[key] || [];
                    const page = this.viewPages[key] || 1;
                    const perPage = 20;
                    const start = (page - 1) * perPage;
                    return items.slice(start, start + perPage);
                },

                // Ëé∑ÂèñÊÄªÊü•ÁúãÈ°µÊï∞
                getTotalViewPages(key) {
                    const items = this.rowLists[key] || [];
                    return Math.ceil(items.length / 20) || 1;
                },

                // ÂàáÊç¢Êü•ÁúãÈ°µÔºàÂ∏¶ËäÇÊµÅ‰øùÊä§Ôºâ
                changeViewPage(key, delta) {
                    console.log(`[DEBUG changeViewPage] START: key=${key}, delta=${delta}`);
                    console.log(`[DEBUG changeViewPage] viewPages[key] BEFORE =`, this.viewPages[key]);

                    // Á°Æ‰øùÂàùÂßãÂÄºÂ≠òÂú®Ôºà‰ΩøÁî®ÂìçÂ∫îÂºèÊñπÂºèÔºâ
                    if (this.viewPages[key] === undefined) {
                        console.log(`[DEBUG changeViewPage] viewPages[${key}] is undefined, initializing to 1`);
                        this.viewPages = { ...this.viewPages, [key]: 1 };
                    }

                    const currentPage = this.viewPages[key];
                    const newPage = currentPage + delta;
                    const totalPages = this.getTotalViewPages(key);

                    console.log(`[DEBUG changeViewPage] currentPage=${currentPage}, newPage=${newPage}, totalPages=${totalPages}`);

                    // Êú¨Âú∞ÁøªÈ°µÔºà‰∏çÈúÄË¶Å APIÔºâÂèØ‰ª•Á´ãÂç≥ÊâßË°å
                    if (newPage >= 1 && newPage <= totalPages) {
                        console.log(`[DEBUG changeViewPage] Condition passed, setting viewPages[${key}] = ${newPage}`);
                        this.viewPages = { ...this.viewPages, [key]: newPage };
                        console.log(`[DEBUG changeViewPage] viewPages[key] AFTER =`, this.viewPages[key]);
                        // ÁøªÈ°µÂêéÊªöÂä®Âà∞ÂàÜÁ±ªÊ†áÈ¢ò‰ΩçÁΩÆÔºàÈ¢ÑÁïôÈ°∂ÈÉ®ÂØºËà™Ê†è 80px Á©∫Èó¥Ôºâ
                        this.$nextTick(() => {
                            const sectionRef = this.$refs[key + '-section'];
                            let el = Array.isArray(sectionRef) ? sectionRef[0] : sectionRef;
                            if (el) {
                                const top = el.getBoundingClientRect().top + window.scrollY - 80;
                                window.scrollTo({ top: top, behavior: 'smooth' });
                            }
                        });
                    } else {
                        console.log(`[DEBUG changeViewPage] Condition FAILED: newPage=${newPage}, totalPages=${totalPages}`);

                        // Â¶ÇÊûúÊòØÂõ†‰∏∫Êï∞ÊçÆËøòÊ≤°Âä†ËΩΩÂÆåÂØºËá¥ÁøªÈ°µÂ§±Ë¥•ÔºåËÆ∞ÂΩïÁõÆÊ†áÈ°µÁ†Å
                        // Á≠âÊï∞ÊçÆÂä†ËΩΩÂÆåÊàêÂêéËá™Âä®ÁøªÈ°µ
                        if (newPage > totalPages && this.rowConfigs[key].page < (this.rowConfigs[key].totalPages || 999)) {
                            console.log(`[DEBUG changeViewPage] Setting pending page for ${key}: ${newPage}`);
                            this._pendingPage = this._pendingPage || {};
                            this._pendingPage[key] = newPage;
                        }
                    }

                    // Â¶ÇÊûúÈúÄË¶ÅÂä†ËΩΩÊõ¥Â§öÊï∞ÊçÆÔºåÊ∑ªÂä†ËäÇÊµÅ‰øùÊä§Ôºà500ms Èó¥ÈöîÔºâ
                    if (newPage >= totalPages && this.rowConfigs[key].page < (this.rowConfigs[key].totalPages || 999)) {
                        // Ê£ÄÊü•ÊòØÂê¶Ê≠£Âú®Âä†ËΩΩ‰∏≠
                        if (this.pageLoadingKeys[key]) {
                            console.log(`[${key}] ËØ∑Ê±ÇËøá‰∫éÈ¢ëÁπÅÔºåËØ∑Á®çÂêéÂÜçËØï`);
                            return;
                        }
                        // ËÆæÁΩÆÂä†ËΩΩÈîÅ
                        this.pageLoadingKeys[key] = true;

                        // Âä†ËΩΩÊõ¥Â§öÊï∞ÊçÆÔºåÂπ∂Âú®ÂÆåÊàêÂêéÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅËá™Âä®ÁøªÈ°µ
                        this.fetchRow(key, true).then(() => {
                            // Ê£ÄÊü•ÊòØÂê¶ÊúâÂæÖÊâßË°åÁöÑÁøªÈ°µ
                            if (this._pendingPage && this._pendingPage[key]) {
                                const pendingPage = this._pendingPage[key];
                                const newTotalPages = this.getTotalViewPages(key);
                                console.log(`[DEBUG] Data loaded, checking pending page ${pendingPage}, new totalPages=${newTotalPages}`);
                                if (pendingPage <= newTotalPages) {
                                    console.log(`[DEBUG] Auto-flipping to page ${pendingPage}`);
                                    this.viewPages = { ...this.viewPages, [key]: pendingPage };
                                }
                                delete this._pendingPage[key];
                            }
                        });

                        // 500ms ÂêéËß£ÈîÅ
                        setTimeout(() => {
                            this.pageLoadingKeys[key] = false;
                        }, 500);
                    }
                },

                // Â§ÑÁêÜÂàÜÁ±ªÁÇπÂáª
                handleCatClick(item) {
                    if (item.action === 'scroll') {
                        this.scrollToSection(item.value);
                    } else if (item.action === 'search') {
                        this.autoSearch(item.value);
                    }
                },

                // Ëé∑ÂèñÊµ∑Êä•ÂõæÁâáÈìæÊé• (Ëá™Âä®ÈÄÇÈÖçÊú¨Âú∞/ËøúÁ®ã)
                getPosterUrl(path, size = 'w300') {
                    if (!path) {
                        return "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='450'%3E%3Crect fill='%23333' width='300' height='450'/%3E%3Ctext fill='%23666' x='50%25' y='50%25' text-anchor='middle' dy='.3em' font-size='20'%3ENo Image%3C/text%3E%3C/svg%3E";
                    }
                    // Â¶ÇÊûúÈÖçÁΩÆ‰∫ÜÊú¨Âú∞ÁºìÂ≠ò URLÔºå‰ΩøÁî®ÂÆÉ (Ê≥®ÊÑèÂéªÊéâ size ÈÉ®ÂàÜÂõ†‰∏∫Â∑≤ÂåÖÂê´Âú® path Èáå? ‰∏çÔºåpathÂè™ÊòØ /xxxx.jpg)
                    // TMDB_IMG_URL Ê†ºÂºèÂèØËÉΩÊòØ "/api/tmdb-image/w342" Êàñ "https://image.tmdb.org/t/p/w342"
                    return this.TMDB_IMG_URL + path;
                },

                // Èò≤ÊäñÊêúÁ¥¢ - ËæìÂÖ•Êó∂ÂÆûÊó∂ÊêúÁ¥¢
                debouncedSearch() {
                    clearTimeout(this.searchTimer);
                    if (!this.keyword || this.keyword.length < 2) {
                        // ÂÖ≥ÈîÆËØçÂ§™Áü≠Êó∂‰∏çÊêúÁ¥¢ÔºåÊ∏ÖÈô§ÁªìÊûú
                        if (!this.keyword) {
                            this.searched = false;
                            this.rawList = [];
                        }
                        return;
                    }
                    this.searchTimer = setTimeout(() => {
                        this.doSearch();
                    }, 500);  // 500ms Èò≤ÊäñÂª∂Ëøü
                },

                // ÊòæÁ§∫ÁîµÂΩ±ËØ¶ÊÉÖÂºπÁ™ó
                showMovieInfo(item) {
                    this.infoModalData = item;
                    this.showInfoModal = true;
                },

                // ËÆæÁΩÆ TMDB Âèç‰ª£ÔºàÈíàÂØπÂ§ßÈôÜÁî®Êà∑Ôºâ
                async setupTmdbProxy(proxyUrl) {
                    let isCN = false;
                    try {
                        // 1. ‰ºòÂÖà‰ΩøÁî® Cloudflare Trace (Á®≥ÂÆö„ÄÅÊó†ÈÄüÁéáÈôêÂà∂)
                        const res = await fetch('https://www.cloudflare.com/cdn-cgi/trace', { timeout: 3000 });
                        if (res.ok) {
                            const text = await res.text();
                            const matches = text.match(/loc=([A-Z]+)/);
                            if (matches && matches[1] === 'CN') isCN = true;
                        } else {
                            throw new Error('CF Trace Status: ' + res.status);
                        }
                    } catch (e) {
                        // 2. ÈôçÁ∫ßÂà∞ ipapi.co (ÊúâÈÄüÁéáÈôêÂà∂Ôºå‰ªÖ‰Ωú‰∏∫Â§áÈÄâ)
                        console.log('[IPÊ£ÄÊµã] CF Trace Â§±Ë¥•ÔºåÂ∞ùËØï ipapi.co...');
                        try {
                            const res = await fetch('https://ipapi.co/json/', { timeout: 3000 });
                            if (res.ok) {
                                const data = await res.json();
                                if (data.country_code === 'CN') isCN = true;
                            } else {
                                console.warn('[IPÊ£ÄÊµã] ipapi.co ÂìçÂ∫îÂºÇÂ∏∏:', res.status);
                            }
                        } catch (e2) {
                            console.warn('[IPÊ£ÄÊµã] ÊâÄÊúâÊé•Âè£ÂùáÂ§±Ë¥•ÔºåÊó†Ê≥ïËá™Âä®ÂàáÊç¢Á∫øË∑Ø', e2);
                        }
                    }

                    if (isCN) {
                        console.log('[IPÊ£ÄÊµã] Ê£ÄÊµãÂà∞Â§ßÈôÜIPÔºåÂêØÁî®TMDBÂèç‰ª£:', proxyUrl);
                        TMDB_BASE_URL = proxyUrl + '/api/3';
                        TMDB_IMG_URL = proxyUrl + '/t/p/w342';
                        TMDB_BACKDROP_URL = proxyUrl + '/t/p/original';
                    } else {
                        console.log('[IPÊ£ÄÊµã] ÈùûÂ§ßÈôÜIPÊàñÊ£ÄÊµãÂÆåÊàêÔºå‰øùÊåÅÂÆòÊñπÂú∞ÂùÄ');
                    }
                },

                // Ê∏ÖÁêÜ HTML Ê†áÁ≠æ
                stripHtml(html) {
                    if (!html) return '';
                    return html.replace(/<[^>]*>/g, '').replace(/&nbsp;/g, ' ').trim();
                },

                getLatencyClass(ms) { return ms < 500 ? 'dot-green' : (ms < 2000 ? 'dot-yellow' : 'dot-red'); },
                castVideo() {
                    const videoEl = document.querySelector('.dplayer-video');
                    if (!videoEl) return alert('ËØ∑ÂÖàÊí≠ÊîæËßÜÈ¢ë');
                    if (videoEl.remote && videoEl.remote.state !== 'disconnected') videoEl.remote.prompt().catch(() => { });
                    else if (videoEl.webkitShowPlaybackTargetPicker) videoEl.webkitShowPlaybackTargetPicker();
                    else alert('ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅÁΩëÈ°µÁõ¥Êé•ÊäïÂ±èÔºåËØ∑‰ΩøÁî®ÊµèËßàÂô®ËèúÂçï‰∏≠ÁöÑÊäïÂ∞ÑÂäüËÉΩ„ÄÇ');
                },

                scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); },

                goHome() {
                    this.scrollToTop();
                    // ÂÖ≥Èó≠Êí≠ÊîæËØ¶ÊÉÖÈ°µ
                    this.showDetail = false;
                    if (dp) dp.pause();
                    // Ê∏ÖÈô§ÊêúÁ¥¢Áä∂ÊÄÅ
                    this.searched = false;
                    this.keyword = '';
                    this.rawList = [];
                    // ÊªöÂä®Âà∞È°µÈù¢È°∂ÈÉ®
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                },

                // Âä†ËΩΩÂçï‰∏™Ê¶úÂçïÊï∞ÊçÆ
                fetchRow(key, loadMore = false) {
                    const config = this.rowConfigs[key];
                    if (!config) return Promise.resolve();

                    if (loadMore) {
                        // Ê£ÄÊü•ÊòØÂê¶Â∑≤Âà∞Ëææ API ËøîÂõûÁöÑÊÄªÈ°µÊï∞
                        if (config.totalPages && config.page >= config.totalPages) {
                            console.log(`[${key}] Â∑≤Âä†ËΩΩÂÖ®ÈÉ® ${config.totalPages} È°µ`);
                            return Promise.resolve();
                        }
                        config.page++;
                    }

                    const url = `${TMDB_BASE_URL}${config.path}?api_key=${TMDB_API_KEY}&language=zh-CN&page=${config.page}&${config.params}`;
                    return fetch(url)
                        .then(res => res.json())
                        .then(data => {
                            if (data.results) {
                                // ‰øùÂ≠òÊÄªÈ°µÊï∞‰ø°ÊÅØ
                                if (data.total_pages) {
                                    config.totalPages = data.total_pages;
                                }
                                // Á°Æ‰øùÂìçÂ∫îÂºèÊõ¥Êñ∞
                                if (!this.rowLists[key]) {
                                    this.rowLists[key] = data.results;
                                } else if (loadMore) {
                                    this.rowLists[key].push(...data.results);
                                } else {
                                    this.rowLists[key] = data.results;
                                }
                            }
                        })
                        .catch(err => console.error(`Fetch error for ${key}:`, err));
                },

                // ÂàùÂßãÂåñÊ¶úÂçï (ÊáíÂä†ËΩΩÊ®°Âºè - ÁßªÂä®Á´ØÁõ¥Êé•È°∫Â∫èÂä†ËΩΩ)
                fetchAllLists() {
                    const keys = Object.keys(this.rowConfigs);

                    // Êõ¥ÂèØÈù†ÁöÑÁßªÂä®Á´ØÊ£ÄÊµãÔºàÂ§öÁßçÊñπÊ≥ïÔºâ
                    const viewportWidth = window.innerWidth;
                    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                    const isMobileUA = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                    const isMobile = viewportWidth < 768 || (isTouchDevice && viewportWidth < 1024) || isMobileUA;

                    console.log(`[ËÆæÂ§áÊ£ÄÊµã] ÂÆΩÂ∫¶=${viewportWidth}, Ëß¶Êë∏=${isTouchDevice}, UAÁßªÂä®=${isMobileUA}, Âà§ÂÆö=${isMobile ? 'ÁßªÂä®Á´Ø' : 'Ê°åÈù¢Á´Ø'}`);

                    // ÁßªÂä®Á´ØÔºöÁõ¥Êé•È°∫Â∫èÂä†ËΩΩÊâÄÊúâÊ¶úÂçïÔºàIntersection Observer ‰∏çÂèØÈù†Ôºâ
                    if (isMobile) {
                        console.log(`[ÁßªÂä®Á´Ø] Áõ¥Êé•Âä†ËΩΩÊâÄÊúâ ${keys.length} ‰∏™Ê¶úÂçï`);
                        keys.forEach((key, index) => {
                            // ÊØè‰∏™Ê¶úÂçïÈó¥Èöî 300ms Âä†ËΩΩÔºåÈÅøÂÖç API ÈÄüÁéáÈôêÂà∂
                            setTimeout(() => {
                                console.log(`[ÁßªÂä®Á´Ø] Ê≠£Âú®Âä†ËΩΩ: ${key}`);
                                this.fetchRow(key);
                            }, index * 300);
                        });
                        return;
                    }

                    // Ê°åÈù¢Á´ØÔºö‰ΩøÁî® Intersection Observer ÊáíÂä†ËΩΩ
                    const EAGER_LOAD_COUNT = 2;

                    // 1. Á´ãÂç≥Âä†ËΩΩÂâç 2 ‰∏™Ê¶úÂçï
                    keys.slice(0, EAGER_LOAD_COUNT).forEach((key, index) => {
                        setTimeout(() => {
                            this.fetchRow(key);
                        }, index * 200);
                    });

                    // 2. ÂÖ∂‰ªñÊ¶úÂçï‰ΩøÁî® Intersection Observer ÊáíÂä†ËΩΩ
                    this.$nextTick(() => {
                        const lazyKeys = keys.slice(EAGER_LOAD_COUNT);
                        if (lazyKeys.length === 0) return;

                        const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                if (entry.isIntersecting) {
                                    const key = entry.target.dataset.rowKey;
                                    if (key && !this.rowLists[key]) {
                                        console.log(`[ÊáíÂä†ËΩΩ] Âä†ËΩΩÊ¶úÂçï: ${key}`);
                                        this.fetchRow(key);
                                    }
                                    observer.unobserve(entry.target);
                                }
                            });
                        }, {
                            rootMargin: '300px 0px',
                            threshold: 0.01
                        });

                        // ‰ΩøÁî® querySelectorAll Ëé∑ÂèñÊâÄÊúâÊ¶úÂçïÂÖÉÁ¥†
                        lazyKeys.forEach(key => {
                            const el = document.querySelector(`[data-row-key="${key}"]`);
                            if (el) {
                                observer.observe(el);
                            }
                        });
                    });
                },

                scrollRow(refName, direction) {
                    let row = this.$refs[refName];
                    // v-for ‰∏≠ÁöÑ ref ÊòØÊï∞ÁªÑ
                    if (Array.isArray(row)) row = row[0];

                    if (row) {
                        const scrollAmount = window.innerWidth * 0.5; // ÊØèÊ¨°ÁøªÂçäÈ°µÔºå‰ΩìÈ™åÊõ¥Â•Ω
                        row.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });

                        // ÂêëÂè≥ÊªöÂä®Êó∂Ëß¶ÂèëÂä†ËΩΩ‰∏ã‰∏ÄÈ°µ
                        if (direction > 0) {
                            this.fetchRow(refName, true);
                        }
                    }
                },

                fetchHero() {
                    return fetch(`${TMDB_BASE_URL}/trending/all/week?api_key=${TMDB_API_KEY}&language=zh-CN`)
                        .then(res => res.json())
                        .then(data => {
                            if (data.results) {
                                this.heroList = data.results.filter(i => i.backdrop_path).slice(0, 5).map(item => ({
                                    title: item.title || item.name,
                                    overview: item.overview || 'Á≤æÂΩ©ÂÜÖÂÆπ‰∏çÂÆπÈîôËøá',
                                    backdrop: `${TMDB_BACKDROP_URL}${item.backdrop_path}`,
                                    rawData: item  // ‰øùÂ≠òÂéüÂßãÊï∞ÊçÆÁî®‰∫éÂºπÁ™ó
                                }));
                            }
                        });
                },

                finalPoster(item, isHot = false) {
                    const name = isHot ? item.vod_name : item.name;
                    return this.imageMap[name] || (isHot ? item.vod_pic : item.pic);
                },
                isFallback(name) { return this.fallbackMap[name] === true; },

                handleImgError(name) {
                    if (this.imageMap[name] || this.fallbackMap[name]) return;
                    this.fallbackMap[name] = true;
                    let cleanName = name.replace(/Á¨¨[0-9‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅ]+[Â≠£ÈÉ®]/g, '').replace(/Season\s*\d+/ig, '').replace(/S\d{1,2}/ig, '').replace(/(HD|BD|1080P|720P|4K|202\d|TC|TS).*/i, '').trim();
                    fetch(`${TMDB_BASE_URL}/search/multi?api_key=${TMDB_API_KEY}&query=${encodeURIComponent(cleanName)}&language=zh-CN`)
                        .then(res => res.json()).then(data => {
                            if (data.results && data.results.length > 0) {
                                const found = data.results.find(i => i.poster_path) || data.results[0];
                                if (found.poster_path) {
                                    this.imageMap[name] = `${TMDB_IMG_URL}${found.poster_path}`;
                                    this.fallbackMap[name] = false;
                                }
                            }
                        }).catch(() => { });
                },



                autoSearch(name) {
                    this.keyword = name;
                    this.doSearch();
                },
                clearSearch() { this.searched = false; this.keyword = ''; this.rawList = []; },
                doSearch() {
                    if (!this.keyword) return;

                    if (this._evtSource) {
                        this._evtSource.close();
                        this._evtSource = null;
                    }

                    this.loading = true;
                    this.searched = true;
                    this.rawList = [];
                    window.scrollTo({ top: 0, behavior: 'smooth' });

                    const url = `/api/search?wd=${encodeURIComponent(this.keyword)}&stream=true`;
                    this._evtSource = new EventSource(url);

                    this._evtSource.onmessage = (e) => {
                        try {
                            const newItems = JSON.parse(e.data);
                            if (Array.isArray(newItems) && newItems.length > 0) {
                                this.rawList = this.rawList.concat(newItems);
                                newItems.forEach(item => {
                                    if (!item.vod_pic || item.vod_pic.includes('mac_default')) this.handleImgError(item.vod_name);
                                });
                            }
                        } catch (err) { }
                    };

                    this._evtSource.addEventListener('done', () => {
                        this.loading = false;
                        if (this._evtSource) {
                            this._evtSource.close();
                            this._evtSource = null;
                        }
                    });

                    this._evtSource.onerror = () => {
                        this.loading = false;
                        if (this._evtSource) {
                            this._evtSource.close();
                            this._evtSource = null;
                        }
                    };
                },
                async openDetail(group) {
                    this.currentGroup = group;
                    this.showDetail = true;
                    this.isTestingSources = true;  // ÂºÄÂßãÊµãÈÄü
                    this.currentSource = null;  // Á°Æ‰øùÊ∏ÖÁ©∫‰πãÂâçÁöÑÈÄâÊã©
                    this.episodeList = [];

                    // ÁúüÂÆûÁî®Êà∑Á´ØÊµãÈÄüÔºöËé∑ÂèñÊØè‰∏™Á∫øË∑ØÁöÑËßÜÈ¢ëURLÔºåÁõ¥Êé•‰ªéÁî®Êà∑Á´ØÊµãËØïm3u8Âª∂Ëøü
                    // ËøôÊ†∑ËÉΩÁúüÊ≠£ÂèçÊò†Áî®Êà∑ÊòØÂê¶ÂèØ‰ª•ËÆøÈóÆËØ•ËßÜÈ¢ëÊ∫ê

                    // Âø´ÈÄüËøîÂõûÊ†áÂøóÔºö‰∏ÄÊó¶Êúâ2+Âø´ÈÄüÁ∫øË∑ØÔºåÁ´ãÂç≥Ëá™Âä®ÈÄâÊã©ÊúÄÂø´ÁöÑ
                    let hasAutoSelected = false;
                    const FAST_THRESHOLD = 600;  // Âø´ÈÄüÁ∫øË∑ØÈòàÂÄº (ms)
                    const EARLY_RETURN_COUNT = 2;  // ÊúâÂá†‰∏™Âø´ÈÄüÁ∫øË∑ØÂêéÊèêÂâçËøîÂõû
                    const MAX_WAIT_TIME = 3000;  // ÊúÄÈïøÁ≠âÂæÖÊó∂Èó¥ (ms)

                    // Ê£ÄÊü•ÊòØÂê¶ÂèØ‰ª•ÊèêÂâçËøîÂõû - ‰ºòÂÖàÁî®Êà∑Á´ØÊµãÈÄüÁªìÊûú
                    const checkEarlyReturn = () => {
                        if (hasAutoSelected) return;

                        // ‰ºòÂÖàÊ£ÄÊü•Áî®Êà∑Á´ØÊµãÈÄü(direct)ÁöÑÂø´ÈÄüÁ∫øË∑Ø
                        const directFastSources = this.currentGroup.sources.filter(s =>
                            s._testType === 'direct' && typeof s.latency === 'number' && s.latency < FAST_THRESHOLD
                        );

                        if (directFastSources.length >= EARLY_RETURN_COUNT) {
                            hasAutoSelected = true;
                            directFastSources.sort((a, b) => a.latency - b.latency);
                            console.log(`[Âø´ÈÄüËøîÂõû] Â∑≤ÊâæÂà∞ ${directFastSources.length} ‰∏™Áî®Êà∑Á´ØÂø´ÈÄüÁ∫øË∑ØÔºåËá™Âä®ÈÄâÊã©: ${directFastSources[0].site_name} (${directFastSources[0].latency}ms üé¨)`);
                            this.switchSource(directFastSources[0]);
                        }
                    };

                    // Ë∂ÖÊó∂Ëá™Âä®ÈÄâÊã©Ôºà‰ºòÂÖàÁî®Êà∑Á´ØÊµãÈÄüÔºåÂÖ∂Ê¨°ÊúçÂä°Âô®Á´ØÔºâ
                    const earlyReturnTimer = setTimeout(() => {
                        if (hasAutoSelected) return;
                        hasAutoSelected = true;

                        // ‰ºòÂÖàÈÄâÊã©Áî®Êà∑Á´ØÊµãÈÄüÁöÑÁªìÊûú
                        let directSources = this.currentGroup.sources.filter(s =>
                            s._testType === 'direct' && typeof s.latency === 'number' && s.latency < 9000
                        );

                        if (directSources.length > 0) {
                            directSources.sort((a, b) => a.latency - b.latency);
                            console.log(`[Ë∂ÖÊó∂ËøîÂõû] ÈÄâÊã©Áî®Êà∑Á´ØÊµãÈÄüÊúÄÂø´ÁöÑ: ${directSources[0].site_name} (${directSources[0].latency}ms üé¨)`);
                            this.switchSource(directSources[0]);
                            return;
                        }

                        // Ê≤°ÊúâÁî®Êà∑Á´ØÊµãÈÄüÁªìÊûúÔºåÂõûÈÄÄÂà∞ÊúçÂä°Âô®Á´Ø
                        const testedSources = this.currentGroup.sources.filter(s =>
                            typeof s.latency === 'number' && s.latency < 9000
                        );

                        if (testedSources.length > 0) {
                            testedSources.sort((a, b) => a.latency - b.latency);
                            console.log(`[Ë∂ÖÊó∂ËøîÂõû] ${MAX_WAIT_TIME}msÂêéËá™Âä®ÈÄâÊã©: ${testedSources[0].site_name} (${testedSources[0].latency}ms)`);
                            this.switchSource(testedSources[0]);
                        }
                    }, MAX_WAIT_TIME);

                    const latencyPromises = this.currentGroup.sources.map(async (source) => {
                        source.latency = '...';
                        try {
                            // 1. ÂÖàËé∑ÂèñËØ•Á∫øË∑ØÁöÑËßÜÈ¢ëËØ¶ÊÉÖ
                            const detailRes = await fetch(`/api/detail?site_key=${source.site_key}&id=${source.vod_id}`);
                            const detailData = await detailRes.json();

                            if (!detailData.list || detailData.list.length === 0) {
                                source.latency = 9999;
                                return source;
                            }

                            // 2. Ëß£ÊûêÂá∫Á¨¨‰∏Ä‰∏™ m3u8 ËßÜÈ¢ë URL
                            const detail = detailData.list[0];
                            let playUrl = detail.vod_play_url || '';

                            // Â§ÑÁêÜÂ§öÁ∫øË∑ØÊ†ºÂºè (Áî® $$$ ÂàÜÈöî)
                            if (playUrl.includes('$$$')) {
                                const sets = playUrl.split('$$$');
                                playUrl = sets.find(s => s.toLowerCase().includes('m3u8')) || sets[0];
                            }

                            // Ëé∑ÂèñÁ¨¨‰∏Ä‰∏™ËßÜÈ¢ëURL
                            const firstEp = playUrl.split('#')[0];
                            const parts = firstEp.split('$');
                            const videoUrl = parts.length > 1 ? parts[1] : parts[0];

                            if (!videoUrl || !videoUrl.startsWith('http')) {
                                source.latency = 9999;
                                return source;
                            }

                            // Ê£ÄÊü•Ê∑∑ÂêàÂÜÖÂÆπÔºöÂ¶ÇÊûúÈ°µÈù¢ÊòØ HTTPS ‰ΩÜËßÜÈ¢ë URL ÊòØ HTTPÔºåÂõûÈÄÄÂà∞ÊúçÂä°Âô®Á´ØÊµãÈÄü
                            const isPageHttps = window.location.protocol === 'https:';
                            const isVideoHttp = videoUrl.startsWith('http:');

                            if (isPageHttps && isVideoHttp) {
                                // Ê∑∑ÂêàÂÜÖÂÆπÔºåÊó†Ê≥ïÁõ¥Êé•ÊµãËØïÔºåÂõûÈÄÄÂà∞ÊúçÂä°Âô®Á´ØÂª∂Ëøü
                                console.log(`[Ê∑∑ÂêàÂÜÖÂÆπ] ${source.site_name} ËßÜÈ¢ëURL‰∏∫HTTPÔºåÂõûÈÄÄÂà∞ÊúçÂä°Âô®ÊµãÈÄü`);
                                const checkRes = await fetch(`/api/check?key=${source.site_key}`);
                                const checkData = await checkRes.json();
                                source.latency = checkData.latency;
                                source._testType = 'server';  // ÊúçÂä°Âô®Á´ØÊµãÈÄü
                                source._cachedDetail = detail;
                                checkEarlyReturn();
                                return source;
                            }

                            // 3. Áî®Êà∑Á´ØÁõ¥Êé•ÊµãËØï m3u8 URL ÁöÑÂª∂Ëøü
                            const startTime = Date.now();
                            const controller = new AbortController();
                            const timeoutId = setTimeout(() => controller.abort(), 5000);

                            // m3u8 Êñá‰ª∂ÈÄöÂ∏∏ÈÖçÁΩÆ‰∫Ü CORSÔºåÂèØ‰ª•Áõ¥Êé• fetch
                            const testRes = await fetch(videoUrl, {
                                method: 'GET',
                                cache: 'no-cache',
                                signal: controller.signal
                            });

                            clearTimeout(timeoutId);

                            if (testRes.ok || testRes.type === 'cors') {
                                source.latency = Date.now() - startTime;
                            } else {
                                source.latency = Date.now() - startTime;
                            }

                            // ÁºìÂ≠òËØ¶ÊÉÖÊï∞ÊçÆÔºåÂêéÁª≠ÂàáÊç¢Êó∂ÂèØ‰ª•Â§çÁî®
                            source._cachedDetail = detail;
                            source._testType = 'direct';  // Áî®Êà∑Á´ØÁõ¥Êé•ÊµãÈÄü

                            // ÊØèÂÆåÊàê‰∏Ä‰∏™ÊµãÈÄüÂ∞±Ê£ÄÊü•ÊòØÂê¶ÂèØ‰ª•ÊèêÂâçËøîÂõû
                            checkEarlyReturn();

                        } catch (e) {
                            // Â¶ÇÊûúÊòØ CORS ÈîôËØØÔºåÂ∞ùËØï no-cors Ê®°ÂºèÂÜçÊµã‰∏ÄÊ¨°
                            if (e.name !== 'AbortError') {
                                try {
                                    const detailRes = await fetch(`/api/detail?site_key=${source.site_key}&id=${source.vod_id}`);
                                    const detailData = await detailRes.json();
                                    if (detailData.list && detailData.list.length > 0) {
                                        source._cachedDetail = detailData.list[0];
                                        // Êó†Ê≥ïÁõ¥Êé•ÊµãËØïÔºåÂõûÈÄÄÂà∞ÊúçÂä°Âô®Á´ØÂª∂Ëøü
                                        const checkRes = await fetch(`/api/check?key=${source.site_key}`);
                                        const checkData = await checkRes.json();
                                        source.latency = checkData.latency;
                                        source._testType = 'server';  // ÊúçÂä°Âô®Á´ØÊµãÈÄü
                                        checkEarlyReturn();
                                    } else {
                                        source.latency = 9999;
                                    }
                                } catch (e2) {
                                    source.latency = 9999;
                                }
                            } else {
                                source.latency = 9999;  // Ë∂ÖÊó∂
                            }
                        }
                        return source;
                    });

                    // Á≠âÂæÖÊâÄÊúâÊµãÈÄüÂÆåÊàêÔºàÂêéÂè∞ÁªßÁª≠Ôºâ
                    await Promise.all(latencyPromises);
                    clearTimeout(earlyReturnTimer);
                    this.isTestingSources = false;  // ÊµãÈÄüÂÆåÊàê

                    // ÊåâÂª∂ËøüÊéíÂ∫è (‰ΩéÂà∞È´ò)
                    this.currentGroup.sources.sort((a, b) => {
                        const latA = typeof a.latency === 'number' ? a.latency : 9999;
                        const latB = typeof b.latency === 'number' ? b.latency : 9999;
                        return latA - latB;
                    });

                    // Â¶ÇÊûúÂ∑≤ÁªèÊúâÈÄâ‰∏≠ÁöÑÊ∫êÂπ∂‰∏îËßÜÈ¢ëÂ∑≤ÂºÄÂßãÊí≠ÊîæÔºå‰∏çÂÜçËá™Âä®ÂàáÊç¢
                    // ËøôÊ†∑‰∏ç‰ºöÊâìÊñ≠Áî®Êà∑Ê≠£Âú®ËßÇÁúãÁöÑÂÜÖÂÆπ
                    if (hasAutoSelected && this.currentSource && this.currentUrl) {
                        console.log(`[ÊµãÈÄüÂÆåÊàê] ‰øùÊåÅÂΩìÂâçÁ∫øË∑Ø: ${this.currentSource.site_name}Ôºå‰∏çËá™Âä®ÂàáÊç¢`);
                        return;
                    }

                    // Â¶ÇÊûúËøòÊ≤°ÊúâÈÄâÊã©‰ªª‰ΩïÊ∫êÔºåÈÄâÊã©ÊúÄÂø´ÁöÑ
                    if (!hasAutoSelected) {
                        // ‰ºòÂÖàÈÄâÊã©Áî®Êà∑Á´ØÊµãÈÄü(direct)ÁöÑÁªìÊûú
                        const directSources = this.currentGroup.sources.filter(s =>
                            s._testType === 'direct' && typeof s.latency === 'number' && s.latency < 9000
                        );

                        if (directSources.length > 0) {
                            console.log(`[ÊµãÈÄüÂÆåÊàê] ÈÄâÊã©Áî®Êà∑Á´ØÊµãÈÄüÊúÄÂø´ÁöÑÁ∫øË∑Ø: ${directSources[0].site_name} (${directSources[0].latency}ms)`);
                            this.switchSource(directSources[0]);
                        } else {
                            // ÂõûÈÄÄÂà∞ÊúçÂä°Âô®Á´ØÊµãÈÄüÊúÄÂø´ÁöÑ
                            const fastestAvailable = this.currentGroup.sources.find(s =>
                                typeof s.latency === 'number' && s.latency < 9000
                            );
                            if (fastestAvailable) {
                                console.log(`[ÊµãÈÄüÂÆåÊàê] ÈÄâÊã©ÊúçÂä°Âô®ÊµãÈÄüÊúÄÂø´ÁöÑÁ∫øË∑Ø: ${fastestAvailable.site_name} (${fastestAvailable.latency}ms)`);
                                this.switchSource(fastestAvailable);
                            }
                        }
                    }
                    // Â¶ÇÊûúÂÖ®ÈÉ®‰∏çÂèØÁî®Ôºå‰∏çËá™Âä®ÈÄâÊã©ÔºåUI‰ºöÊòæÁ§∫ÊèêÁ§∫
                },
                closeDetail() { this.showDetail = false; if (dp) dp.pause(); },
                async switchSource(source) {
                    this.currentSource = source;
                    this.loadingDetail = true;
                    this.episodeList = [];

                    try {
                        // ‰ºòÂÖà‰ΩøÁî®ÊµãÈÄüÊó∂ÁºìÂ≠òÁöÑËØ¶ÊÉÖÊï∞ÊçÆ
                        let detail = source._cachedDetail;

                        if (!detail) {
                            // Â¶ÇÊûúÊ≤°ÊúâÁºìÂ≠òÔºåÈáçÊñ∞Ëé∑Âèñ
                            const res = await fetch(`/api/detail?site_key=${source.site_key}&id=${source.vod_id}`);
                            const data = await res.json();
                            if (data.list && data.list.length > 0) {
                                detail = data.list[0];
                            }
                        }

                        if (detail) {
                            // ‰øùÂ≠òÁÆÄ‰ªã‰ø°ÊÅØÂà∞ÂΩìÂâçÊ∫ê
                            this.currentSource.vod_content = detail.vod_content || detail.vod_blurb || '';
                            this.parseEpisodes(detail.vod_play_url);
                        }
                    } catch (e) { }
                    this.loadingDetail = false;
                },
                parseEpisodes(urlStr) {
                    let playSource = urlStr;
                    if (urlStr.includes('$$$')) {
                        const sets = urlStr.split('$$$');
                        playSource = sets.find(s => s.toLowerCase().includes('m3u8')) || sets[0];
                    }
                    this.episodeList = playSource.split('#').map(ep => {
                        const p = ep.split('$');
                        return { name: p.length > 1 ? p[0] : 'Ê≠£Áâá', url: p.length > 1 ? p[1] : p[0] };
                    });
                    if (this.episodeList.length > 0) this.play(this.episodeList[0].url);
                },
                play(url) {
                    this.currentUrl = url;
                    this.playbackErrorCount = 0;  // ÈáçÁΩÆÈîôËØØËÆ°Êï∞

                    const setupErrorHandling = () => {
                        // ÁõëÂê¨Êí≠ÊîæÈîôËØØÔºåËá™Âä®ÂàáÊç¢Âà∞‰∏ã‰∏Ä‰∏™ÂèØÁî®Á∫øË∑Ø
                        dp.on('error', () => {
                            this.handlePlaybackError();
                        });

                        // ÁõëÂê¨ HLS ÈîôËØØ
                        if (dp.video) {
                            dp.video.addEventListener('error', () => {
                                this.handlePlaybackError();
                            });
                        }
                    };

                    if (!dp) {
                        dp = new DPlayer({
                            container: document.getElementById('dplayer'),
                            theme: '#e50914',
                            video: { url: url, type: 'hls' }
                        });

                        // Ê∑ªÂä†ÂÖ®Â±èÊ®™Â±èÂäüËÉΩÔºàÊâãÊú∫Á´ØÔºâ
                        dp.on('fullscreen', () => {
                            if (screen.orientation && screen.orientation.lock) {
                                screen.orientation.lock('landscape').catch(() => { });
                            }
                        });

                        dp.on('fullscreen_cancel', () => {
                            if (screen.orientation && screen.orientation.unlock) {
                                screen.orientation.unlock();
                            }
                        });

                        setupErrorHandling();
                    } else {
                        dp.switchVideo({ url: url, type: 'hls' });
                    }
                    dp.play();
                },

                // Â§ÑÁêÜÊí≠ÊîæÈîôËØØÔºåËá™Âä®ÂàáÊç¢Á∫øË∑Ø
                handlePlaybackError() {
                    this.playbackErrorCount++;

                    // ÈÅøÂÖçÈáçÂ§çËß¶Âèë
                    if (this.isAutoRetrying || this.playbackErrorCount > 1) return;

                    // Ëé∑ÂèñÂΩìÂâçÁ∫øË∑ØÁ¥¢Âºï
                    const allSources = this.availableSources;
                    const currentIndex = allSources.findIndex(s => s.site_key === this.currentSource?.site_key);

                    // Â¶ÇÊûúËøòÊúâ‰∏ã‰∏Ä‰∏™Á∫øË∑ØÂèØÁî®ÔºåËá™Âä®ÂàáÊç¢
                    if (currentIndex >= 0 && currentIndex < allSources.length - 1) {
                        this.isAutoRetrying = true;
                        const nextSource = allSources[currentIndex + 1];

                        // ÊòæÁ§∫Áî®Êà∑ÊèêÁ§∫
                        this.autoRetryMessage = `${this.currentSource?.site_name} Êí≠ÊîæÂ§±Ë¥•ÔºåÊ≠£Âú®Â∞ùËØï ${nextSource.site_name}`;
                        console.log(`[Auto-Failover] ${this.autoRetryMessage}`);

                        // Ê†áËÆ∞ÂΩìÂâçÁ∫øË∑Ø‰∏∫‰∏çÂèØÁî®ÔºàËÆæÁΩÆÈ´òÂª∂ËøüÔºâ
                        if (this.currentSource) {
                            this.currentSource.latency = 9998;  // Ê†áËÆ∞‰∏∫Áî®Êà∑Á´Ø‰∏çÂèØÁî®
                        }

                        // ÂàáÊç¢Âà∞‰∏ã‰∏Ä‰∏™Á∫øË∑Ø
                        setTimeout(() => {
                            this.autoRetryMessage = '';  // Ê∏ÖÈô§ÊèêÁ§∫
                            this.isAutoRetrying = false;
                            this.switchSource(nextSource);
                        }, 1500);  // ÊòæÁ§∫ÊèêÁ§∫1.5ÁßíÂêéÂàáÊç¢
                    } else {
                        // Ê≤°ÊúâÊõ¥Â§öÂèØÁî®Á∫øË∑Ø
                        this.autoRetryMessage = 'ÊâÄÊúâÁ∫øË∑ØÂùáÊó†Ê≥ïÊí≠Êîæ';
                        setTimeout(() => {
                            this.autoRetryMessage = '';
                        }, 3000);
                    }
                }
            }
        }).mount('#app');
    </script>

    <!-- Register Service Worker -->
    <script data-cfasync="false">
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('SW registered: ', reg.scope))
                    .catch(err => console.log('SW registration failed: ', err));
            });
        }
    </script>
</body>

</html>